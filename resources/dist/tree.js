var ri=Object.defineProperty,di=(e,t,s)=>t in e?ri(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,c=(e,t,s)=>(di(e,typeof t!="symbol"?t+"":t,s),s),Ht=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},n=(e,t,s)=>(Ht(e,t,"read from private field"),s?s.call(e):t.get(e)),h=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},m=(e,t,s,i)=>(Ht(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s),a=(e,t,s)=>(Ht(e,t,"access private method"),s),Vt={arrowUp:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg>',arrowDown:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9l6 6 6-6"/></svg>',arrowRight:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>',attention:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',clear:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',cross:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',check:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>',partialCheck:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>'},T=(e,t)=>{if(t.innerHTML="",typeof e=="string")t.innerHTML=e;else{let s=e.cloneNode(!0);t.appendChild(s)}},Gt=e=>{let t=e?{...e}:{};return Object.keys(Vt).forEach(s=>{t[s]||(t[s]=Vt[s])}),t},ui=e=>e.reduce((t,{name:s},i)=>(t+=s,i<e.length-1&&(t+=", "),t),""),N,S,D,E,Se,Hs,G,z,Le,Mt,ye,It,M,F,A,H,xe,Ps,_e,Dt,We,Vs,Te,$t,Oe,qt,Ne,jt,Ae,Rt,Be,Ut,He,Gs,Pe,zt,Ve,Ft,Ge,Ms,Me,Yt,Ie,Jt,De,Kt,$e,Xt,X,qe,je=class{constructor({value:t,showTags:s,tagsCountText:i,clearable:l,isAlwaysOpened:o,searchable:r,placeholder:p,disabled:k,isSingleSelect:f,id:w,ariaLabel:v,iconElements:b,inputCallback:g,searchCallback:L,openCallback:O,closeCallback:$,keydownCallback:V,focusCallback:q,blurCallback:we,nameChangeCallback:J}){h(this,Se),h(this,G),h(this,Le),h(this,ye),h(this,M),h(this,A),h(this,xe),h(this,_e),h(this,We),h(this,Te),h(this,Oe),h(this,Ne),h(this,Ae),h(this,Be),h(this,He),h(this,Pe),h(this,Ve),h(this,Ge),h(this,Me),h(this,Ie),h(this,De),h(this,$e),h(this,X),c(this,"value"),c(this,"showTags"),c(this,"tagsCountText"),c(this,"clearable"),c(this,"isAlwaysOpened"),c(this,"searchable"),c(this,"placeholder"),c(this,"disabled"),c(this,"isSingleSelect"),c(this,"id"),c(this,"ariaLabel"),c(this,"iconElements"),c(this,"isOpened"),c(this,"searchText"),c(this,"srcElement"),h(this,N,void 0),h(this,S,void 0),h(this,D,void 0),h(this,E,void 0),c(this,"inputCallback"),c(this,"searchCallback"),c(this,"openCallback"),c(this,"closeCallback"),c(this,"keydownCallback"),c(this,"focusCallback"),c(this,"blurCallback"),c(this,"nameChangeCallback"),this.value=t,this.showTags=s,this.tagsCountText=i,this.searchable=r,this.placeholder=p,this.clearable=l,this.isAlwaysOpened=o,this.disabled=k,this.isSingleSelect=f,this.id=w,this.ariaLabel=v,this.iconElements=b,this.isOpened=!1,this.searchText="",m(this,N,a(this,We,Vs).call(this)),m(this,S,a(this,He,Gs).call(this)),m(this,D,a(this,Ge,Ms).call(this)),m(this,E,null),this.inputCallback=g,this.searchCallback=L,this.openCallback=O,this.closeCallback=$,this.keydownCallback=V,this.focusCallback=q,this.blurCallback=we,this.nameChangeCallback=J,this.srcElement=a(this,xe,Ps).call(this,n(this,N),n(this,S),n(this,D)),a(this,Se,Hs).call(this)}focus(){setTimeout(()=>n(this,S).focus(),0)}blur(){this.isOpened&&a(this,A,H).call(this),this.clearSearch(),n(this,S).blur()}updateValue(t){this.value=t,a(this,G,z).call(this),a(this,M,F).call(this)}removeItem(t){this.value=this.value.filter(s=>s.id!==t),a(this,X,qe).call(this),a(this,G,z).call(this),a(this,M,F).call(this)}clear(){this.value=[],a(this,X,qe).call(this),a(this,G,z).call(this),this.clearSearch()}openClose(){a(this,A,H).call(this)}clearSearch(){this.searchText="",this.searchCallback(""),a(this,M,F).call(this)}};N=new WeakMap,S=new WeakMap,D=new WeakMap,E=new WeakMap,Se=new WeakSet,Hs=function(){a(this,G,z).call(this),a(this,M,F).call(this),a(this,Le,Mt).call(this)},G=new WeakSet,z=function(){if(n(this,N).innerHTML="",this.showTags){n(this,N).append(...a(this,Te,$t).call(this));let e=ui(this.value);this.nameChangeCallback(e)}else{let e=a(this,Be,Ut).call(this);n(this,N).appendChild(e),this.nameChangeCallback(e.innerText)}n(this,N).appendChild(n(this,S))},Le=new WeakSet,Mt=function(){let e=[];n(this,D).innerHTML="",this.clearable&&e.push(a(this,Me,Yt).call(this)),this.isAlwaysOpened||e.push(a(this,De,Kt).call(this,this.isOpened)),e.length&&n(this,D).append(...e)},ye=new WeakSet,It=function(){if(!this.isAlwaysOpened&&n(this,E)){let e=this.isOpened?this.iconElements.arrowUp:this.iconElements.arrowDown;T(e,n(this,E))}},M=new WeakSet,F=function(){var e;(e=this.value)!=null&&e.length?(n(this,S).removeAttribute("placeholder"),this.srcElement.classList.remove("treeselect-input--value-not-selected")):(n(this,S).setAttribute("placeholder",this.placeholder),this.srcElement.classList.add("treeselect-input--value-not-selected")),this.searchable?this.srcElement.classList.remove("treeselect-input--unsearchable"):this.srcElement.classList.add("treeselect-input--unsearchable"),this.isSingleSelect?this.srcElement.classList.add("treeselect-input--is-single-select"):this.srcElement.classList.remove("treeselect-input--is-single-select"),n(this,S).value=this.searchText},A=new WeakSet,H=function(){this.isOpened=!this.isOpened,a(this,ye,It).call(this),this.isOpened?this.openCallback():this.closeCallback()},xe=new WeakSet,Ps=function(e,t,s){let i=document.createElement("div");return i.classList.add("treeselect-input"),i.setAttribute("tabindex","-1"),i.addEventListener("mousedown",l=>a(this,_e,Dt).call(this,l)),i.addEventListener("focus",()=>this.focusCallback(),!0),i.addEventListener("blur",()=>this.blurCallback(),!0),e.appendChild(t),i.append(e,s),i},_e=new WeakSet,Dt=function(e){e.stopPropagation(),this.isOpened||a(this,A,H).call(this),this.focus()},We=new WeakSet,Vs=function(){let e=document.createElement("div");return e.classList.add("treeselect-input__tags"),e},Te=new WeakSet,$t=function(){return this.value.map(e=>{let t=document.createElement("div");t.classList.add("treeselect-input__tags-element"),t.setAttribute("tabindex","-1"),t.setAttribute("tag-id",e.id.toString()),t.setAttribute("title",e.name);let s=a(this,Ne,jt).call(this,e.name),i=a(this,Ae,Rt).call(this);return t.addEventListener("mousedown",l=>a(this,Oe,qt).call(this,l,e.id)),t.append(s,i),t})},Oe=new WeakSet,qt=function(e,t){e.preventDefault(),e.stopPropagation(),this.removeItem(t),this.focus()},Ne=new WeakSet,jt=function(e){let t=document.createElement("span");return t.classList.add("treeselect-input__tags-name"),t.textContent=e,t},Ae=new WeakSet,Rt=function(){let e=document.createElement("span");return e.classList.add("treeselect-input__tags-cross"),T(this.iconElements.cross,e),e},Be=new WeakSet,Ut=function(){let e=document.createElement("span");if(e.classList.add("treeselect-input__tags-count"),!this.value.length)return e.textContent="",e.setAttribute("title",""),e;let t=this.value.length===1?this.value[0].name:`${this.value.length} ${this.tagsCountText}`;return e.textContent=t,e.setAttribute("title",t),e},He=new WeakSet,Gs=function(){let e=document.createElement("input");return e.classList.add("treeselect-input__edit"),this.id&&e.setAttribute("id",this.id),(!this.searchable||this.disabled)&&e.setAttribute("readonly","readonly"),this.disabled&&e.setAttribute("tabindex","-1"),this.ariaLabel.length&&e.setAttribute("aria-label",this.ariaLabel),e.addEventListener("keydown",t=>a(this,Pe,zt).call(this,t)),e.addEventListener("input",t=>a(this,Ve,Ft).call(this,t,e)),e},Pe=new WeakSet,zt=function(e){e.stopPropagation();let t=e.key;t==="Backspace"&&!this.searchText.length&&this.value.length&&!this.showTags&&this.clear(),t==="Backspace"&&!this.searchText.length&&this.value.length&&this.removeItem(this.value[this.value.length-1].id),e.code==="Space"&&(!this.searchText||!this.searchable)&&a(this,A,H).call(this),(t==="Enter"||t==="ArrowDown"||t==="ArrowUp")&&e.preventDefault(),this.keydownCallback(e),t!=="Tab"&&this.focus()},Ve=new WeakSet,Ft=function(e,t){e.stopPropagation();let s=this.searchText,i=t.value.trim();if(s.length===0&&i.length===0){t.value="";return}if(this.searchable){let l=e.target.value;this.searchCallback(l),this.isOpened||a(this,A,H).call(this)}else t.value="";this.searchText=t.value},Ge=new WeakSet,Ms=function(){let e=document.createElement("div");return e.classList.add("treeselect-input__operators"),e},Me=new WeakSet,Yt=function(){let e=document.createElement("span");return e.classList.add("treeselect-input__clear"),e.setAttribute("tabindex","-1"),T(this.iconElements.clear,e),e.addEventListener("mousedown",t=>a(this,Ie,Jt).call(this,t)),e},Ie=new WeakSet,Jt=function(e){e.preventDefault(),e.stopPropagation(),(this.searchText.length||this.value.length)&&this.clear(),this.focus()},De=new WeakSet,Kt=function(e){m(this,E,document.createElement("span")),n(this,E).classList.add("treeselect-input__arrow");let t=e?this.iconElements.arrowUp:this.iconElements.arrowDown;return T(t,n(this,E)),n(this,E).addEventListener("mousedown",s=>a(this,$e,Xt).call(this,s)),n(this,E)},$e=new WeakSet,Xt=function(e){e.stopPropagation(),e.preventDefault(),this.focus(),a(this,A,H).call(this)},X=new WeakSet,qe=function(){this.inputCallback(this.value)};var Is=(e,t,s,i)=>{wi(t);let l=t.filter(o=>!o.disabled&&e.some(r=>r===o.id));if(s&&l.length){l[0].checked=!0;return}l.forEach(o=>{o.checked=!0;let r=Pt(o,t,i);o.checked=r})},Pt=({id:e,checked:t},s,i)=>{let l=s.find(r=>r.id===e);if(!l)return!1;if(i)return l.checked=l.disabled?!1:!!t,l.checked;let o=Ds(!!t,l,s);return $s(l,s),o},Ds=(e,t,s)=>{if(!t.isGroup)return t.checked=t.disabled?!1:!!e,t.isPartialChecked=!1,t.checked;let i=s.filter(l=>l.childOf===t.id);return!e||t.disabled||t.isPartialChecked?(t.checked=!1,t.isPartialChecked=!1,Re(t,i,s),t.checked):qs(i,s)?js(i)?(t.checked=!1,t.isPartialChecked=!1,t.disabled=!0,t.checked):(t.checked=!1,t.isPartialChecked=!0,i.forEach(l=>{Ds(e,l,s)}),t.checked):(t.checked=!0,t.isPartialChecked=!1,Re(t,i,s),t.checked)},$s=(e,t)=>{let s=t.find(i=>i.id===e.childOf);s&&(pi(s,t),$s(s,t))},pi=(e,t)=>{let s=me(e,t);if(js(s)){e.checked=!1,e.isPartialChecked=!1,e.disabled=!0;return}if(mi(s)){e.checked=!0,e.isPartialChecked=!1;return}if(ki(s)){e.checked=!1,e.isPartialChecked=!0;return}e.checked=!1,e.isPartialChecked=!1},Re=({checked:e,disabled:t},s,i)=>{s.forEach(l=>{l.disabled=!!t||!!l.disabled,l.checked=!!e&&!l.disabled,l.isPartialChecked=!1;let o=me(l,i);Re({checked:e,disabled:t},o,i)})},qs=(e,t)=>e.some(s=>s.disabled)?!0:e.some(s=>{if(s.isGroup){let i=me(s,t);return qs(i,t)}return!1}),js=e=>e.every(t=>!!t.disabled),mi=e=>e.every(t=>!!t.checked),ki=e=>e.some(t=>!!t.checked||!!t.isPartialChecked),wi=e=>{e.forEach(t=>{t.checked=!1,t.isPartialChecked=!1})},vi=(e,t,s)=>{let i={level:0,groupId:""},l=Rs(e,t,i.groupId,i.level);return bi(l,s)},Rs=(e,t,s,i)=>e.reduce((l,o)=>{var r;let p=!!((r=o.children)!=null&&r.length),k=i>=t&&p,f=i>t;if(l.push({id:o.value,name:o.name,childOf:s,isGroup:p,checked:!1,isPartialChecked:!1,level:i,isClosed:k,hidden:f,disabled:o.disabled??!1}),p){let w=Rs(o.children,t,o.value,i+1);l.push(...w)}return l},[]),me=({id:e},t)=>t.filter(s=>s.childOf===e),fi=e=>{let{ungroupedNodes:t,allGroupedNodes:s,allNodes:i}=e.reduce((o,r)=>(r.checked&&(o.allNodes.push(r),r.isGroup?o.allGroupedNodes.push(r):o.ungroupedNodes.push(r)),o),{ungroupedNodes:[],allGroupedNodes:[],allNodes:[]}),l=i.filter(o=>!s.some(({id:r})=>r===o.childOf));return{ungroupedNodes:t,groupedNodes:l,allNodes:i}},bi=(e,t)=>(e.filter(s=>!!s.disabled).forEach(({id:s})=>Pt({id:s,checked:!1},e,t)),e),ke=(e,{id:t,isClosed:s})=>{me({id:t},e).forEach(i=>{i.hidden=s??!1,i.isGroup&&!i.isClosed&&ke(e,{id:i.id,isClosed:s})})},gi=e=>{e.filter(t=>t.isGroup&&!t.disabled&&(t.checked||t.isPartialChecked)).forEach(t=>{t.isClosed=!1,ke(e,t)})},Ci=(e,t)=>{let s=Ei(e,t);e.forEach(i=>{s.some(({id:l})=>l===i.id)?(i.isGroup&&(i.isClosed=!1,ke(e,i)),i.hidden=!1):i.hidden=!0})},Ei=(e,t)=>e.reduce((s,i)=>{if(i.name.toLowerCase().includes(t.toLowerCase())){if(s.push(i),i.isGroup){let l=Us(i.id,e);s.push(...l)}if(i.childOf){let l=zs(i.childOf,e);s.push(...l)}}return s},[]),Us=(e,t)=>t.reduce((s,i)=>(i.childOf===e&&(s.push(i),i.isGroup&&s.push(...Us(i.id,t))),s),[]),zs=(e,t)=>t.reduce((s,i)=>(i.id===e&&(s.push(i),i.childOf&&s.push(...zs(i.childOf,t))),s),[]),Si=e=>{let{duplications:t}=e.reduce((s,i)=>(s.allItems.some(l=>l.toString()===i.id.toString())&&s.duplications.push(i.id),s.allItems.push(i.id),s),{duplications:[],allItems:[]});t.length&&console.error(`Validation: You have duplicated values: ${t.join(", ")}! You should use unique values.`)},Li=(e,t,s,i,l,o,r,p,k)=>{Is(e,t,l,k),p&&r&&gi(t),ce(t,s,i,o)},ce=(e,t,s,i)=>{e.forEach(l=>{let o=t.querySelector(`[input-id="${l.id}"]`),r=_(o);o.checked=l.checked,yi(l,r,i),xi(l,r),_i(l,r),Wi(l,r,s),Ti(l,r),Ni(l,r,e),Oi(l,o,s)}),Ai(e,t)},yi=(e,t,s)=>{e.checked?t.classList.add("treeselect-list__item--checked"):t.classList.remove("treeselect-list__item--checked"),Array.isArray(s)&&s[0]===e.id&&!e.disabled?t.classList.add("treeselect-list__item--single-selected"):t.classList.remove("treeselect-list__item--single-selected")},xi=(e,t)=>{e.isPartialChecked?t.classList.add("treeselect-list__item--partial-checked"):t.classList.remove("treeselect-list__item--partial-checked")},_i=(e,t)=>{e.disabled?t.classList.add("treeselect-list__item--disabled"):t.classList.remove("treeselect-list__item--disabled")},Wi=(e,t,s)=>{if(e.isGroup){let i=t.querySelector(".treeselect-list__item-icon"),l=e.isClosed?s.arrowRight:s.arrowDown;T(l,i),e.isClosed?t.classList.add("treeselect-list__item--closed"):t.classList.remove("treeselect-list__item--closed")}},Ti=(e,t)=>{e.hidden?t.classList.add("treeselect-list__item--hidden"):t.classList.remove("treeselect-list__item--hidden")},Oi=(e,t,s)=>{let i=t.parentNode.querySelector(".treeselect-list__item-checkbox-icon");e.checked?T(s.check,i):e.isPartialChecked?T(s.partialCheck,i):i.innerHTML=""},Ni=(e,t,s)=>{let i=e.level===0,l=20,o=5;if(i){let r=s.some(k=>k.isGroup&&k.level===e.level),p=!e.isGroup&&r?`${l}px`:`${o}px`;t.style.paddingLeft=e.isGroup?"0":p}else t.style.paddingLeft=e.isGroup?`${e.level*l}px`:`${e.level*l+l}px`;t.setAttribute("level",e.level.toString()),t.setAttribute("group",e.isGroup.toString())},Ai=(e,t)=>{let s=e.some(l=>!l.hidden),i=t.querySelector(".treeselect-list__empty");s?i.classList.add("treeselect-list__empty--hidden"):i.classList.remove("treeselect-list__empty--hidden")},_=e=>e.parentNode.parentNode,Qt=(e,t)=>t.find(s=>s.id.toString()===e),Bi=e=>_(e).querySelector(".treeselect-list__item-icon"),Hi=(e,t)=>{t&&Object.keys(t).forEach(s=>{let i=t[s];typeof i=="string"&&e.setAttribute(s,i)})},I,P,W,Q,Ue,Fs,ze,Ys,Fe,Js,Ye,Zt,Je,es,Ke,ts,Z,ve,Xe,ss,Qe,is,Ze,ls,ee,fe,et,ns,tt,as,st,hs,it,cs,lt,os,nt,rs,at,ds,ht,us,ct,ps,ot,ms,rt,ks,te,be,oe,dt,ut,ws,pt=class{constructor({options:t,value:s,openLevel:i,listSlotHtmlComponent:l,emptyText:o,isSingleSelect:r,iconElements:p,showCount:k,disabledBranchNode:f,expandSelected:w,isIndependentNodes:v,inputCallback:b,arrowClickCallback:g,mouseupCallback:L}){h(this,Ue),h(this,ze),h(this,Fe),h(this,Ye),h(this,Je),h(this,Ke),h(this,Z),h(this,Xe),h(this,Qe),h(this,Ze),h(this,ee),h(this,et),h(this,tt),h(this,st),h(this,it),h(this,lt),h(this,nt),h(this,at),h(this,ht),h(this,ct),h(this,ot),h(this,rt),h(this,te),h(this,oe),h(this,ut),c(this,"options"),c(this,"value"),c(this,"openLevel"),c(this,"listSlotHtmlComponent"),c(this,"emptyText"),c(this,"isSingleSelect"),c(this,"showCount"),c(this,"disabledBranchNode"),c(this,"expandSelected"),c(this,"isIndependentNodes"),c(this,"iconElements"),c(this,"searchText"),c(this,"flattedOptions"),c(this,"flattedOptionsBeforeSearch"),c(this,"selectedNodes"),c(this,"srcElement"),c(this,"inputCallback"),c(this,"arrowClickCallback"),c(this,"mouseupCallback"),h(this,I,null),h(this,P,!0),h(this,W,[]),h(this,Q,!0),this.options=t,this.value=s,this.openLevel=i??0,this.listSlotHtmlComponent=l??null,this.emptyText=o??"No results found...",this.isSingleSelect=r??!1,this.showCount=k??!1,this.disabledBranchNode=f??!1,this.expandSelected=w??!1,this.isIndependentNodes=v??!1,this.iconElements=p,this.searchText="",this.flattedOptions=vi(this.options,this.openLevel,this.isIndependentNodes),this.flattedOptionsBeforeSearch=this.flattedOptions,this.selectedNodes={nodes:[],groupedNodes:[],allNodes:[]},this.srcElement=a(this,Fe,Js).call(this),this.inputCallback=b,this.arrowClickCallback=g,this.mouseupCallback=L,Si(this.flattedOptions)}updateValue(t){this.value=t,m(this,W,this.isSingleSelect?this.value:[]),Li(t,this.flattedOptions,this.srcElement,this.iconElements,this.isSingleSelect,n(this,W),this.expandSelected,n(this,Q),this.isIndependentNodes),m(this,Q,!1),a(this,oe,dt).call(this)}updateSearchValue(t){if(t===this.searchText)return;let s=this.searchText===""&&t!=="";this.searchText=t,s&&(this.flattedOptionsBeforeSearch=JSON.parse(JSON.stringify(this.flattedOptions))),this.searchText===""&&(this.flattedOptions=this.flattedOptionsBeforeSearch.map(i=>{let l=this.flattedOptions.find(o=>o.id===i.id);return l.isClosed=i.isClosed,l.hidden=i.hidden,l}),this.flattedOptionsBeforeSearch=[]),this.searchText&&Ci(this.flattedOptions,t),ce(this.flattedOptions,this.srcElement,this.iconElements,n(this,W)),this.focusFirstListElement()}callKeyAction(t){m(this,P,!1);let s=this.srcElement.querySelector(".treeselect-list__item--focused");if(s?.classList.contains("treeselect-list__item--hidden"))return;let i=t.key;i==="Enter"&&s&&s.dispatchEvent(new Event("mousedown")),(i==="ArrowLeft"||i==="ArrowRight")&&a(this,Ue,Fs).call(this,s,t),(i==="ArrowDown"||i==="ArrowUp")&&a(this,ze,Ys).call(this,s,i)}focusFirstListElement(){let t="treeselect-list__item--focused",s=this.srcElement.querySelector(`.${t}`),i=Array.from(this.srcElement.querySelectorAll(".treeselect-list__item-checkbox")).filter(l=>window.getComputedStyle(_(l)).display!=="none");i.length&&(s&&s.classList.remove(t),_(i[0]).classList.add(t))}isLastFocusedElementExist(){return!!n(this,I)}};I=new WeakMap,P=new WeakMap,W=new WeakMap,Q=new WeakMap,Ue=new WeakSet,Fs=function(e,t){if(!e)return;let s=t.key,i=e.querySelector(".treeselect-list__item-checkbox").getAttribute("input-id"),l=Qt(i,this.flattedOptions),o=e.querySelector(".treeselect-list__item-icon");s==="ArrowLeft"&&!l.isClosed&&l.isGroup&&(o.dispatchEvent(new Event("mousedown")),t.preventDefault()),s==="ArrowRight"&&l.isClosed&&l.isGroup&&(o.dispatchEvent(new Event("mousedown")),t.preventDefault())},ze=new WeakSet,Ys=function(e,t){var s;let i=Array.from(this.srcElement.querySelectorAll(".treeselect-list__item-checkbox")).filter(l=>window.getComputedStyle(_(l)).display!=="none");if(i.length)if(!e)_(i[0]).classList.add("treeselect-list__item--focused");else{let l=i.findIndex(g=>_(g).classList.contains("treeselect-list__item--focused"));_(i[l]).classList.remove("treeselect-list__item--focused");let o=t==="ArrowDown"?l+1:l-1,r=t==="ArrowDown"?0:i.length-1,p=i[o]??i[r],k=!i[o],f=_(p);f.classList.add("treeselect-list__item--focused");let w=this.srcElement.getBoundingClientRect(),v=f.getBoundingClientRect();if(k&&t==="ArrowDown"){this.srcElement.scroll(0,0);return}if(k&&t==="ArrowUp"){this.srcElement.scroll(0,this.srcElement.scrollHeight);return}let b=((s=this.listSlotHtmlComponent)==null?void 0:s.clientHeight)??0;if(w.y+w.height<v.y+v.height+b){this.srcElement.scroll(0,this.srcElement.scrollTop+v.height);return}if(w.y>v.y){this.srcElement.scroll(0,this.srcElement.scrollTop-v.height);return}}},Fe=new WeakSet,Js=function(){let e=a(this,Ye,Zt).call(this),t=a(this,Z,ve).call(this,this.options);e.append(...t);let s=a(this,Qe,is).call(this);e.append(s);let i=a(this,Xe,ss).call(this);return i&&e.append(i),e},Ye=new WeakSet,Zt=function(){let e=document.createElement("div");return e.classList.add("treeselect-list"),this.isSingleSelect&&e.classList.add("treeselect-list--single-select"),this.disabledBranchNode&&e.classList.add("treeselect-list--disabled-branch-node"),e.addEventListener("mouseout",t=>a(this,Je,es).call(this,t)),e.addEventListener("mousemove",()=>a(this,Ke,ts).call(this)),e.addEventListener("mouseup",()=>this.mouseupCallback(),!0),e},Je=new WeakSet,es=function(e){e.stopPropagation(),n(this,I)&&n(this,P)&&n(this,I).classList.add("treeselect-list__item--focused")},Ke=new WeakSet,ts=function(){m(this,P,!0)},Z=new WeakSet,ve=function(e){return e.reduce((t,s)=>{var i;if((i=s.children)!=null&&i.length){let o=a(this,Ze,ls).call(this,s),r=a(this,Z,ve).call(this,s.children);return o.append(...r),t.push(o),t}let l=a(this,ee,fe).call(this,s,!1);return t.push(l),t},[])},Xe=new WeakSet,ss=function(){if(!this.listSlotHtmlComponent)return null;let e=document.createElement("div");return e.classList.add("treeselect-list__slot"),e.appendChild(this.listSlotHtmlComponent),e},Qe=new WeakSet,is=function(){let e=document.createElement("div");e.classList.add("treeselect-list__empty"),e.setAttribute("title",this.emptyText);let t=document.createElement("span");t.classList.add("treeselect-list__empty-icon"),T(this.iconElements.attention,t);let s=document.createElement("span");return s.classList.add("treeselect-list__empty-text"),s.textContent=this.emptyText,e.append(t,s),e},Ze=new WeakSet,ls=function(e){let t=document.createElement("div");t.setAttribute("group-container-id",e.value.toString()),t.classList.add("treeselect-list__group-container");let s=a(this,ee,fe).call(this,e,!0);return t.appendChild(s),t},ee=new WeakSet,fe=function(e,t){let s=a(this,et,ns).call(this,e);if(t){let o=a(this,lt,os).call(this);s.appendChild(o),s.classList.add("treeselect-list__item--group")}let i=a(this,at,ds).call(this,e),l=a(this,ht,us).call(this,e,t);return s.append(i,l),s},et=new WeakSet,ns=function(e){let t=document.createElement("div");return Hi(t,e.htmlAttr),t.setAttribute("tabindex","-1"),t.setAttribute("title",e.name),t.classList.add("treeselect-list__item"),t.addEventListener("mouseover",()=>a(this,tt,as).call(this,t),!0),t.addEventListener("mouseout",()=>a(this,st,hs).call(this,t),!0),t.addEventListener("mousedown",s=>a(this,it,cs).call(this,s,e)),t},tt=new WeakSet,as=function(e){n(this,P)&&a(this,te,be).call(this,!0,e)},st=new WeakSet,hs=function(e){n(this,P)&&(a(this,te,be).call(this,!1,e),m(this,I,e))},it=new WeakSet,cs=function(e,t){var s;if(e.preventDefault(),e.stopPropagation(),(s=this.flattedOptions.find(l=>l.id===t.value))==null?void 0:s.disabled)return;let i=e.target.querySelector(".treeselect-list__item-checkbox");i.checked=!i.checked,a(this,ot,ms).call(this,i,t)},lt=new WeakSet,os=function(){let e=document.createElement("span");return e.setAttribute("tabindex","-1"),e.classList.add("treeselect-list__item-icon"),T(this.iconElements.arrowDown,e),e.addEventListener("mousedown",t=>a(this,nt,rs).call(this,t)),e},nt=new WeakSet,rs=function(e){e.preventDefault(),e.stopPropagation(),a(this,rt,ks).call(this,e)},at=new WeakSet,ds=function(e){let t=document.createElement("div");t.classList.add("treeselect-list__item-checkbox-container");let s=document.createElement("span");s.classList.add("treeselect-list__item-checkbox-icon"),s.innerHTML="";let i=document.createElement("input");return i.setAttribute("tabindex","-1"),i.setAttribute("type","checkbox"),i.setAttribute("input-id",e.value.toString()),i.classList.add("treeselect-list__item-checkbox"),t.append(s,i),t},ht=new WeakSet,us=function(e,t){let s=document.createElement("label");if(s.textContent=e.name,s.classList.add("treeselect-list__item-label"),t&&this.showCount){let i=a(this,ct,ps).call(this,e);s.appendChild(i)}return s},ct=new WeakSet,ps=function(e){let t=document.createElement("span"),s=this.flattedOptions.filter(i=>i.childOf===e.value);return t.textContent=`(${s.length})`,t.classList.add("treeselect-list__item-label-counter"),t},ot=new WeakSet,ms=function(e,t){let s=this.flattedOptions.find(i=>i.id===t.value);if(s){if(s!=null&&s.isGroup&&this.disabledBranchNode){let i=Bi(e);i?.dispatchEvent(new Event("mousedown"));return}if(this.isSingleSelect){let[i]=n(this,W);if(s.id===i)return;m(this,W,[s.id]),Is([s.id],this.flattedOptions,this.isSingleSelect,this.isIndependentNodes)}else{s.checked=e.checked;let i=Pt(s,this.flattedOptions,this.isIndependentNodes);e.checked=i}ce(this.flattedOptions,this.srcElement,this.iconElements,n(this,W)),a(this,ut,ws).call(this)}},rt=new WeakSet,ks=function(e){var t,s;let i=(s=(t=e.target)==null?void 0:t.parentNode)==null?void 0:s.querySelector("[input-id]"),l=i?.getAttribute("input-id")??null,o=Qt(l,this.flattedOptions);o&&(o.isClosed=!o.isClosed,ke(this.flattedOptions,o),ce(this.flattedOptions,this.srcElement,this.iconElements,n(this,W)),this.arrowClickCallback(o.id,o.isClosed))},te=new WeakSet,be=function(e,t){let s="treeselect-list__item--focused";if(e){let i=Array.from(this.srcElement.querySelectorAll(`.${s}`));i.length&&i.forEach(l=>l.classList.remove(s)),t.classList.add(s)}else t.classList.remove(s)},oe=new WeakSet,dt=function(){let{ungroupedNodes:e,groupedNodes:t,allNodes:s}=fi(this.flattedOptions);this.selectedNodes={nodes:e,groupedNodes:t,allNodes:s}},ut=new WeakSet,ws=function(){a(this,oe,dt).call(this),this.inputCallback(this.selectedNodes),this.value=this.selectedNodes.nodes.map(e=>e.id)};var vs=({parentHtmlContainer:e,staticList:t,appendToBody:s,isSingleSelect:i,value:l,direction:o})=>{e||console.error("Validation: parentHtmlContainer prop is required!"),t&&s&&console.error("Validation: You should set staticList to false if you use appendToBody!"),i&&Array.isArray(l)&&console.error("Validation: if you use isSingleSelect prop, you should pass a single value!"),!i&&!Array.isArray(l)&&console.error("Validation: you should pass an array as a value!"),o&&o!=="auto"&&o!=="bottom"&&o!=="top"&&console.error("Validation: you should pass (auto | top | bottom | undefined) as a value for the direction prop!")},K=e=>e.map(t=>t.id),Pi=e=>e?Array.isArray(e)?e:[e]:[],Vi=(e,t)=>{if(t){let[s]=e;return s??null}return e},d,u,j,se,R,y,x,C,B,ie,mt,le,ge,kt,fs,wt,bs,vt,gs,ft,Cs,bt,Es,gt,Ss,re,Ct,Et,Ls,St,ys,Lt,xs,yt,_s,de,xt,_t,Ks,Y,ue,ne,Ce,U,ae,Wt,Ws,he,Ee,Tt,Ts,Ot,Os,Nt,Ns,At,As,Bt,Bs,pe=class{constructor({parentHtmlContainer:t,value:s,options:i,openLevel:l,appendToBody:o,alwaysOpen:r,showTags:p,tagsCountText:k,clearable:f,searchable:w,placeholder:v,grouped:b,isGroupedValue:g,listSlotHtmlComponent:L,disabled:O,emptyText:$,staticList:V,id:q,ariaLabel:we,isSingleSelect:J,showCount:Xs,disabledBranchNode:Qs,direction:Zs,expandSelected:ei,saveScrollPosition:ti,isIndependentNodes:si,iconElements:ii,inputCallback:li,openCallback:ni,closeCallback:ai,nameChangeCallback:hi,searchCallback:ci,openCloseGroupCallback:oi}){h(this,ie),h(this,le),h(this,kt),h(this,wt),h(this,vt),h(this,ft),h(this,bt),h(this,gt),h(this,re),h(this,Et),h(this,St),h(this,Lt),h(this,yt),h(this,de),h(this,_t),h(this,Y),h(this,ne),h(this,U),h(this,Wt),h(this,he),h(this,Tt),h(this,Ot),h(this,Nt),h(this,At),h(this,Bt),c(this,"parentHtmlContainer"),c(this,"value"),c(this,"options"),c(this,"openLevel"),c(this,"appendToBody"),c(this,"alwaysOpen"),c(this,"showTags"),c(this,"tagsCountText"),c(this,"clearable"),c(this,"searchable"),c(this,"placeholder"),c(this,"grouped"),c(this,"isGroupedValue"),c(this,"listSlotHtmlComponent"),c(this,"disabled"),c(this,"emptyText"),c(this,"staticList"),c(this,"id"),c(this,"ariaLabel"),c(this,"isSingleSelect"),c(this,"showCount"),c(this,"disabledBranchNode"),c(this,"direction"),c(this,"expandSelected"),c(this,"saveScrollPosition"),c(this,"isIndependentNodes"),c(this,"iconElements"),c(this,"inputCallback"),c(this,"openCallback"),c(this,"closeCallback"),c(this,"nameChangeCallback"),c(this,"searchCallback"),c(this,"openCloseGroupCallback"),c(this,"ungroupedValue"),c(this,"groupedValue"),c(this,"allValue"),c(this,"isListOpened"),c(this,"selectedName"),c(this,"srcElement"),h(this,d,null),h(this,u,null),h(this,j,null),h(this,se,0),h(this,R,0),h(this,y,null),h(this,x,null),h(this,C,null),h(this,B,null),vs({parentHtmlContainer:t,value:s,staticList:V,appendToBody:o,isSingleSelect:J}),this.parentHtmlContainer=t,this.value=[],this.options=i??[],this.openLevel=l??0,this.appendToBody=o??!1,this.alwaysOpen=!!(r&&!O),this.showTags=p??!0,this.tagsCountText=k??"elements selected",this.clearable=f??!0,this.searchable=w??!0,this.placeholder=v??"Search...",this.grouped=b??!0,this.isGroupedValue=g??!1,this.listSlotHtmlComponent=L??null,this.disabled=O??!1,this.emptyText=$??"No results found...",this.staticList=!!(V&&!this.appendToBody),this.id=q??"",this.ariaLabel=we??"",this.isSingleSelect=J??!1,this.showCount=Xs??!1,this.disabledBranchNode=Qs??!1,this.direction=Zs??"auto",this.expandSelected=ei??!1,this.saveScrollPosition=ti??!0,this.isIndependentNodes=si??!1,this.iconElements=Gt(ii),this.inputCallback=li,this.openCallback=ni,this.closeCallback=ai,this.nameChangeCallback=hi,this.searchCallback=ci,this.openCloseGroupCallback=oi,this.ungroupedValue=[],this.groupedValue=[],this.allValue=[],this.isListOpened=!1,this.selectedName="",this.srcElement=null,a(this,ie,mt).call(this,s)}mount(){vs({parentHtmlContainer:this.parentHtmlContainer,value:this.value,staticList:this.staticList,appendToBody:this.appendToBody,isSingleSelect:this.isSingleSelect}),this.iconElements=Gt(this.iconElements),a(this,ie,mt).call(this,this.value)}updateValue(t){let s=Pi(t),i=n(this,d);i&&(i.updateValue(s),a(this,re,Ct).call(this,i?.selectedNodes))}destroy(){this.srcElement&&(a(this,de,xt).call(this),this.srcElement.innerHTML="",this.srcElement=null,a(this,U,ae).call(this,!0))}focus(){n(this,u)&&n(this,u).focus()}toggleOpenClose(){n(this,u)&&(n(this,u).openClose(),n(this,u).focus())}scrollWindowHandler(){this.updateListPosition()}focusWindowHandler(t){var s,i,l;(s=this.srcElement)!=null&&s.contains(t.target)||(i=n(this,d))!=null&&i.srcElement.contains(t.target)||((l=n(this,u))==null||l.blur(),a(this,U,ae).call(this,!1),a(this,Y,ue).call(this,!1))}blurWindowHandler(){var t;(t=n(this,u))==null||t.blur(),a(this,U,ae).call(this,!1),a(this,Y,ue).call(this,!1)}updateListPosition(){var t;let s=this.srcElement,i=(t=n(this,d))==null?void 0:t.srcElement;if(!s||!i)return;let{height:l}=i.getBoundingClientRect(),{x:o,y:r,height:p,width:k}=s.getBoundingClientRect(),f=window.innerHeight,w=r,v=f-r-p,b=w>v&&w>=l&&v<l;if(this.direction!=="auto"&&(b=this.direction==="top"),this.appendToBody){(i.style.top!=="0px"||i.style.left!=="0px")&&(i.style.top="0px",i.style.left="0px");let L=o+window.scrollX,O=b?r+window.scrollY-l:r+window.scrollY+p;i.style.transform=`translate(${L}px,${O}px)`,i.style.width=`${k}px`}let g=b?"top":"bottom";i.getAttribute("direction")!==g&&(i.setAttribute("direction",g),a(this,_t,Ks).call(this,b,this.appendToBody))}};d=new WeakMap,u=new WeakMap,j=new WeakMap,se=new WeakMap,R=new WeakMap,y=new WeakMap,x=new WeakMap,C=new WeakMap,B=new WeakMap,ie=new WeakSet,mt=function(e){var t;this.destroy();let{container:s,list:i,input:l}=a(this,kt,fs).call(this);this.srcElement=s,m(this,d,i),m(this,u,l),m(this,y,this.scrollWindowHandler.bind(this)),m(this,x,this.scrollWindowHandler.bind(this)),m(this,C,this.focusWindowHandler.bind(this)),m(this,B,this.blurWindowHandler.bind(this)),this.alwaysOpen&&((t=n(this,u))==null||t.openClose()),this.disabled?this.srcElement.classList.add("treeselect--disabled"):this.srcElement.classList.remove("treeselect--disabled"),this.updateValue(e??this.value)},le=new WeakSet,ge=function({groupedNodes:e,nodes:t,allNodes:s}){this.ungroupedValue=t?K(t):[],this.groupedValue=e?K(e):[],this.allValue=s?K(s):[];let i=[];this.isIndependentNodes||this.isSingleSelect?i=this.allValue:this.isGroupedValue?i=this.groupedValue:i=this.ungroupedValue,this.value=Vi(i,this.isSingleSelect)},kt=new WeakSet,fs=function(){let e=this.parentHtmlContainer;e.classList.add("treeselect");let t=new pt({value:[],options:this.options,openLevel:this.openLevel,listSlotHtmlComponent:this.listSlotHtmlComponent,emptyText:this.emptyText,isSingleSelect:this.isSingleSelect,showCount:this.showCount,disabledBranchNode:this.disabledBranchNode,expandSelected:this.expandSelected,isIndependentNodes:this.isIndependentNodes,iconElements:this.iconElements,inputCallback:i=>a(this,Et,Ls).call(this,i),arrowClickCallback:(i,l)=>a(this,St,ys).call(this,i,l),mouseupCallback:()=>{var i;return(i=n(this,u))==null?void 0:i.focus()}}),s=new je({value:[],showTags:this.showTags,tagsCountText:this.tagsCountText,clearable:this.clearable,isAlwaysOpened:this.alwaysOpen,searchable:this.searchable,placeholder:this.placeholder,disabled:this.disabled,isSingleSelect:this.isSingleSelect,id:this.id,ariaLabel:this.ariaLabel,iconElements:this.iconElements,inputCallback:i=>a(this,wt,bs).call(this,i),searchCallback:i=>a(this,ft,Cs).call(this,i),openCallback:()=>a(this,yt,_s).call(this),closeCallback:()=>a(this,de,xt).call(this),keydownCallback:i=>a(this,vt,gs).call(this,i),focusCallback:()=>a(this,bt,Es).call(this),blurCallback:()=>a(this,gt,Ss).call(this),nameChangeCallback:i=>a(this,Lt,xs).call(this,i)});return this.appendToBody&&m(this,j,new ResizeObserver(()=>this.updateListPosition())),e.append(s.srcElement),{container:e,list:t,input:s}},wt=new WeakSet,bs=function(e){var t,s;let i=K(e);(t=n(this,d))==null||t.updateValue(i);let l=((s=n(this,d))==null?void 0:s.selectedNodes)??{};a(this,le,ge).call(this,l),a(this,he,Ee).call(this)},vt=new WeakSet,gs=function(e){var t;this.isListOpened&&((t=n(this,d))==null||t.callKeyAction(e))},ft=new WeakSet,Cs=function(e){n(this,R)&&clearTimeout(n(this,R)),m(this,R,window.setTimeout(()=>{var t;(t=n(this,d))==null||t.updateSearchValue(e),this.updateListPosition()},350)),a(this,At,As).call(this,e)},bt=new WeakSet,Es=function(){a(this,Y,ue).call(this,!0),n(this,C)&&n(this,C)&&n(this,B)&&(document.addEventListener("mousedown",n(this,C),!0),document.addEventListener("focus",n(this,C),!0),window.addEventListener("blur",n(this,B)))},gt=new WeakSet,Ss=function(){setTimeout(()=>{var e,t;let s=(e=n(this,u))==null?void 0:e.srcElement.contains(document.activeElement),i=(t=n(this,d))==null?void 0:t.srcElement.contains(document.activeElement);!s&&!i&&this.blurWindowHandler()},1)},re=new WeakSet,Ct=function(e){var t;if(!e)return;let s=[];this.isIndependentNodes||this.isSingleSelect?s=e.allNodes:this.grouped?s=e.groupedNodes:s=e.nodes,(t=n(this,u))==null||t.updateValue(s),a(this,le,ge).call(this,e)},Et=new WeakSet,Ls=function(e){var t,s,i;a(this,re,Ct).call(this,e),this.isSingleSelect&&!this.alwaysOpen&&((t=n(this,u))==null||t.openClose(),(s=n(this,u))==null||s.clearSearch()),(i=n(this,u))==null||i.focus(),a(this,he,Ee).call(this)},St=new WeakSet,ys=function(e,t){var s;(s=n(this,u))==null||s.focus(),this.updateListPosition(),a(this,Bt,Bs).call(this,e,t)},Lt=new WeakSet,xs=function(e){this.selectedName!==e&&(this.selectedName=e,a(this,Tt,Ts).call(this))},yt=new WeakSet,_s=function(){var e;this.isListOpened=!0,n(this,y)&&n(this,x)&&(window.addEventListener("scroll",n(this,y),!0),window.addEventListener("resize",n(this,x))),!(!n(this,d)||!this.srcElement)&&(this.appendToBody?(document.body.appendChild(n(this,d).srcElement),(e=n(this,j))==null||e.observe(this.srcElement)):this.srcElement.appendChild(n(this,d).srcElement),this.updateListPosition(),a(this,ne,Ce).call(this,!0),a(this,Wt,Ws).call(this),a(this,Ot,Os).call(this))},de=new WeakSet,xt=function(){var e;this.alwaysOpen||(this.isListOpened=!1,n(this,y)&&n(this,x)&&(window.removeEventListener("scroll",n(this,y),!0),window.removeEventListener("resize",n(this,x))),!n(this,d)||!this.srcElement)||!(this.appendToBody?document.body.contains(n(this,d).srcElement):this.srcElement.contains(n(this,d).srcElement))||(m(this,se,n(this,d).srcElement.scrollTop),this.appendToBody?(document.body.removeChild(n(this,d).srcElement),(e=n(this,j))==null||e.disconnect()):this.srcElement.removeChild(n(this,d).srcElement),a(this,ne,Ce).call(this,!1),a(this,Nt,Ns).call(this))},_t=new WeakSet,Ks=function(e,t){if(!n(this,d)||!n(this,u))return;let s=t?"treeselect-list--top-to-body":"treeselect-list--top",i=t?"treeselect-list--bottom-to-body":"treeselect-list--bottom";e?(n(this,d).srcElement.classList.add(s),n(this,d).srcElement.classList.remove(i),n(this,u).srcElement.classList.add("treeselect-input--top"),n(this,u).srcElement.classList.remove("treeselect-input--bottom")):(n(this,d).srcElement.classList.remove(s),n(this,d).srcElement.classList.add(i),n(this,u).srcElement.classList.remove("treeselect-input--top"),n(this,u).srcElement.classList.add("treeselect-input--bottom"))},Y=new WeakSet,ue=function(e){!n(this,u)||!n(this,d)||(e?(n(this,u).srcElement.classList.add("treeselect-input--focused"),n(this,d).srcElement.classList.add("treeselect-list--focused")):(n(this,u).srcElement.classList.remove("treeselect-input--focused"),n(this,d).srcElement.classList.remove("treeselect-list--focused")))},ne=new WeakSet,Ce=function(e){var t,s,i,l;e?(t=n(this,u))==null||t.srcElement.classList.add("treeselect-input--opened"):(s=n(this,u))==null||s.srcElement.classList.remove("treeselect-input--opened"),this.staticList?(i=n(this,d))==null||i.srcElement.classList.add("treeselect-list--static"):(l=n(this,d))==null||l.srcElement.classList.remove("treeselect-list--static")},U=new WeakSet,ae=function(e){!n(this,y)||!n(this,x)||!n(this,C)||!n(this,B)||((!this.alwaysOpen||e)&&(window.removeEventListener("scroll",n(this,y),!0),window.removeEventListener("resize",n(this,x))),document.removeEventListener("mousedown",n(this,C),!0),document.removeEventListener("focus",n(this,C),!0),window.removeEventListener("blur",n(this,B)))},Wt=new WeakSet,Ws=function(){var e,t,s;let i=(e=n(this,d))==null?void 0:e.isLastFocusedElementExist();this.saveScrollPosition&&i?(t=n(this,d))==null||t.srcElement.scroll(0,n(this,se)):(s=n(this,d))==null||s.focusFirstListElement()},he=new WeakSet,Ee=function(){var e;(e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("input",{detail:this.value})),this.inputCallback&&this.inputCallback(this.value)},Tt=new WeakSet,Ts=function(){var e;(e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("name-change",{detail:this.selectedName})),this.nameChangeCallback&&this.nameChangeCallback(this.selectedName)},Ot=new WeakSet,Os=function(){var e;this.alwaysOpen||((e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("open",{detail:this.value})),this.openCallback&&this.openCallback(this.value))},Nt=new WeakSet,Ns=function(){var e;this.alwaysOpen||((e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("close",{detail:this.value})),this.closeCallback&&this.closeCallback(this.value))},At=new WeakSet,As=function(e){var t;let s=e?.trim()??"";(t=this.srcElement)==null||t.dispatchEvent(new CustomEvent("search",{detail:s})),this.searchCallback&&this.searchCallback(s)},Bt=new WeakSet,Bs=function(e,t){var s;(s=this.srcElement)==null||s.dispatchEvent(new CustomEvent("open-close-group",{detail:{groupId:e,isClosed:t}})),this.openCloseGroupCallback&&this.openCloseGroupCallback(e,t)};function Gi({state:e,name:t,options:s,searchable:i,showCount:l,placeholder:o,disabledBranchNode:r=!0,disabled:p=!1,isSingleSelect:k=!0,showTags:f=!0,clearable:w=!0,isIndependentNodes:v=!0,alwaysOpen:b=!1,emptyText:g,expandSelected:L=!0,grouped:O=!0,openLevel:$=0,direction:V="auto"}){return{state:e,tree:null,init(){this.tree=new pe({id:`tree-${t}-id`,ariaLabel:`tree-${t}-label`,parentHtmlContainer:this.$refs.tree,value:this.state,options:s,searchable:i,showCount:l,placeholder:o,disabledBranchNode:r,disabled:p,isSingleSelect:k,showTags:f,clearable:w,isIndependentNodes:v,alwaysOpen:b,emptyText:g,expandSelected:L,grouped:O,openLevel:$,direction:V}),this.tree.srcElement.addEventListener("input",q=>{this.state=q.detail})}}}export{Gi as default};
