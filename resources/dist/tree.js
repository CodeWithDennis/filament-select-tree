<<<<<<< Updated upstream
var hi=Object.defineProperty,ci=(e,t,s)=>t in e?hi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,c=(e,t,s)=>(ci(e,typeof t!="symbol"?t+"":t,s),s),Bt=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},n=(e,t,s)=>(Bt(e,t,"read from private field"),s?s.call(e):t.get(e)),h=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},m=(e,t,s,i)=>(Bt(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s),a=(e,t,s)=>(Bt(e,t,"access private method"),s),Pt={arrowUp:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg>',arrowDown:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9l6 6 6-6"/></svg>',arrowRight:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>',attention:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',clear:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',cross:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',check:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>',partialCheck:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>'},T=(e,t)=>{if(t.innerHTML="",typeof e=="string")t.innerHTML=e;else{let s=e.cloneNode(!0);t.appendChild(s)}},Vt=e=>{let t=e?{...e}:{};return Object.keys(Pt).forEach(s=>{t[s]||(t[s]=Pt[s])}),t},oi=e=>e.reduce((t,{name:s},i)=>(t+=s,i<e.length-1&&(t+=", "),t),""),O,L,I,S,Se,As,V,j,Le,Mt,ye,Gt,M,R,N,B,xe,Bs,_e,It,We,Hs,Te,Dt,Oe,$t,Ne,qt,Ae,jt,Be,Rt,He,Ps,Pe,Ft,Ve,Ut,Me,Vs,Ge,zt,Ie,Yt,De,Jt,$e,Kt,J,qe,je=class{constructor({value:t,showTags:s,tagsCountText:i,clearable:l,isAlwaysOpened:o,searchable:r,placeholder:p,disabled:w,isSingleSelect:f,id:k,ariaLabel:v,iconElements:b,inputCallback:g,searchCallback:C,openCallback:P,closeCallback:me,keydownCallback:U,focusCallback:we,blurCallback:ke,nameChangeCallback:z}){h(this,Se),h(this,V),h(this,Le),h(this,ye),h(this,M),h(this,N),h(this,xe),h(this,_e),h(this,We),h(this,Te),h(this,Oe),h(this,Ne),h(this,Ae),h(this,Be),h(this,He),h(this,Pe),h(this,Ve),h(this,Me),h(this,Ge),h(this,Ie),h(this,De),h(this,$e),h(this,J),c(this,"value"),c(this,"showTags"),c(this,"tagsCountText"),c(this,"clearable"),c(this,"isAlwaysOpened"),c(this,"searchable"),c(this,"placeholder"),c(this,"disabled"),c(this,"isSingleSelect"),c(this,"id"),c(this,"ariaLabel"),c(this,"iconElements"),c(this,"isOpened"),c(this,"searchText"),c(this,"srcElement"),h(this,O,void 0),h(this,L,void 0),h(this,I,void 0),h(this,S,void 0),c(this,"inputCallback"),c(this,"searchCallback"),c(this,"openCallback"),c(this,"closeCallback"),c(this,"keydownCallback"),c(this,"focusCallback"),c(this,"blurCallback"),c(this,"nameChangeCallback"),this.value=t,this.showTags=s,this.tagsCountText=i,this.searchable=r,this.placeholder=p,this.clearable=l,this.isAlwaysOpened=o,this.disabled=w,this.isSingleSelect=f,this.id=k,this.ariaLabel=v,this.iconElements=b,this.isOpened=!1,this.searchText="",m(this,O,a(this,We,Hs).call(this)),m(this,L,a(this,He,Ps).call(this)),m(this,I,a(this,Me,Vs).call(this)),m(this,S,null),this.inputCallback=g,this.searchCallback=C,this.openCallback=P,this.closeCallback=me,this.keydownCallback=U,this.focusCallback=we,this.blurCallback=ke,this.nameChangeCallback=z,this.srcElement=a(this,xe,Bs).call(this,n(this,O),n(this,L),n(this,I)),a(this,Se,As).call(this)}focus(){setTimeout(()=>n(this,L).focus(),0)}blur(){this.isOpened&&a(this,N,B).call(this),this.clearSearch(),n(this,L).blur()}updateValue(t){this.value=t,a(this,V,j).call(this),a(this,M,R).call(this)}removeItem(t){this.value=this.value.filter(s=>s.id!==t),a(this,J,qe).call(this),a(this,V,j).call(this),a(this,M,R).call(this)}clear(){this.value=[],a(this,J,qe).call(this),a(this,V,j).call(this),this.clearSearch()}openClose(){a(this,N,B).call(this)}clearSearch(){this.searchText="",this.searchCallback(""),a(this,M,R).call(this)}};O=new WeakMap,L=new WeakMap,I=new WeakMap,S=new WeakMap,Se=new WeakSet,As=function(){a(this,V,j).call(this),a(this,M,R).call(this),a(this,Le,Mt).call(this)},V=new WeakSet,j=function(){if(n(this,O).innerHTML="",this.showTags){n(this,O).append(...a(this,Te,Dt).call(this));let e=oi(this.value);this.nameChangeCallback(e)}else{let e=a(this,Be,Rt).call(this);n(this,O).appendChild(e),this.nameChangeCallback(e.innerText)}n(this,O).appendChild(n(this,L))},Le=new WeakSet,Mt=function(){let e=[];n(this,I).innerHTML="",this.clearable&&e.push(a(this,Ge,zt).call(this)),this.isAlwaysOpened||e.push(a(this,De,Jt).call(this,this.isOpened)),e.length&&n(this,I).append(...e)},ye=new WeakSet,Gt=function(){if(!this.isAlwaysOpened&&n(this,S)){let e=this.isOpened?this.iconElements.arrowUp:this.iconElements.arrowDown;T(e,n(this,S))}},M=new WeakSet,R=function(){var e;(e=this.value)!=null&&e.length?(n(this,L).removeAttribute("placeholder"),this.srcElement.classList.remove("treeselect-input--value-not-selected")):(n(this,L).setAttribute("placeholder",this.placeholder),this.srcElement.classList.add("treeselect-input--value-not-selected")),this.searchable?this.srcElement.classList.remove("treeselect-input--unsearchable"):this.srcElement.classList.add("treeselect-input--unsearchable"),this.isSingleSelect?this.srcElement.classList.add("treeselect-input--is-single-select"):this.srcElement.classList.remove("treeselect-input--is-single-select"),n(this,L).value=this.searchText},N=new WeakSet,B=function(){this.isOpened=!this.isOpened,a(this,ye,Gt).call(this),this.isOpened?this.openCallback():this.closeCallback()},xe=new WeakSet,Bs=function(e,t,s){let i=document.createElement("div");return i.classList.add("treeselect-input"),i.setAttribute("tabindex","-1"),i.addEventListener("mousedown",l=>a(this,_e,It).call(this,l)),i.addEventListener("focus",()=>this.focusCallback(),!0),i.addEventListener("blur",()=>this.blurCallback(),!0),e.appendChild(t),i.append(e,s),i},_e=new WeakSet,It=function(e){e.stopPropagation(),this.isOpened||a(this,N,B).call(this),this.focus()},We=new WeakSet,Hs=function(){let e=document.createElement("div");return e.classList.add("treeselect-input__tags"),e},Te=new WeakSet,Dt=function(){return this.value.map(e=>{let t=document.createElement("div");t.classList.add("treeselect-input__tags-element"),t.setAttribute("tabindex","-1"),t.setAttribute("tag-id",e.id.toString()),t.setAttribute("title",e.name);let s=a(this,Ne,qt).call(this,e.name),i=a(this,Ae,jt).call(this);return t.addEventListener("mousedown",l=>a(this,Oe,$t).call(this,l,e.id)),t.append(s,i),t})},Oe=new WeakSet,$t=function(e,t){e.preventDefault(),e.stopPropagation(),this.removeItem(t),this.focus()},Ne=new WeakSet,qt=function(e){let t=document.createElement("span");return t.classList.add("treeselect-input__tags-name"),t.textContent=e,t},Ae=new WeakSet,jt=function(){let e=document.createElement("span");return e.classList.add("treeselect-input__tags-cross"),T(this.iconElements.cross,e),e},Be=new WeakSet,Rt=function(){let e=document.createElement("span");if(e.classList.add("treeselect-input__tags-count"),!this.value.length)return e.textContent="",e.setAttribute("title",""),e;let t=this.value.length===1?this.value[0].name:`${this.value.length} ${this.tagsCountText}`;return e.textContent=t,e.setAttribute("title",t),e},He=new WeakSet,Ps=function(){let e=document.createElement("input");return e.classList.add("treeselect-input__edit"),this.id&&e.setAttribute("id",this.id),(!this.searchable||this.disabled)&&e.setAttribute("readonly","readonly"),this.disabled&&e.setAttribute("tabindex","-1"),this.ariaLabel.length&&e.setAttribute("aria-label",this.ariaLabel),e.addEventListener("keydown",t=>a(this,Pe,Ft).call(this,t)),e.addEventListener("input",t=>a(this,Ve,Ut).call(this,t,e)),e},Pe=new WeakSet,Ft=function(e){e.stopPropagation();let t=e.key;t==="Backspace"&&!this.searchText.length&&this.value.length&&!this.showTags&&this.clear(),t==="Backspace"&&!this.searchText.length&&this.value.length&&this.removeItem(this.value[this.value.length-1].id),e.code==="Space"&&(!this.searchText||!this.searchable)&&a(this,N,B).call(this),(t==="Enter"||t==="ArrowDown"||t==="ArrowUp")&&e.preventDefault(),this.keydownCallback(e),t!=="Tab"&&this.focus()},Ve=new WeakSet,Ut=function(e,t){e.stopPropagation();let s=this.searchText,i=t.value.trim();if(s.length===0&&i.length===0){t.value="";return}if(this.searchable){let l=e.target.value;this.searchCallback(l),this.isOpened||a(this,N,B).call(this)}else t.value="";this.searchText=t.value},Me=new WeakSet,Vs=function(){let e=document.createElement("div");return e.classList.add("treeselect-input__operators"),e},Ge=new WeakSet,zt=function(){let e=document.createElement("span");return e.classList.add("treeselect-input__clear"),e.setAttribute("tabindex","-1"),T(this.iconElements.clear,e),e.addEventListener("mousedown",t=>a(this,Ie,Yt).call(this,t)),e},Ie=new WeakSet,Yt=function(e){e.preventDefault(),e.stopPropagation(),(this.searchText.length||this.value.length)&&this.clear(),this.focus()},De=new WeakSet,Jt=function(e){m(this,S,document.createElement("span")),n(this,S).classList.add("treeselect-input__arrow");let t=e?this.iconElements.arrowUp:this.iconElements.arrowDown;return T(t,n(this,S)),n(this,S).addEventListener("mousedown",s=>a(this,$e,Kt).call(this,s)),n(this,S)},$e=new WeakSet,Kt=function(e){e.stopPropagation(),e.preventDefault(),this.focus(),a(this,N,B).call(this)},J=new WeakSet,qe=function(){this.inputCallback(this.value)};var Ms=(e,t,s,i)=>{pi(t);let l=t.filter(o=>!o.disabled&&e.some(r=>r===o.id));if(s&&l.length){l[0].checked=!0;return}l.forEach(o=>{o.checked=!0;let r=Ht(o,t,i);o.checked=r})},Ht=({id:e,checked:t},s,i)=>{let l=s.find(r=>r.id===e);if(!l)return!1;if(i)return l.checked=l.disabled?!1:!!t,l.checked;let o=Gs(!!t,l,s);return Is(l,s),o},Gs=(e,t,s)=>{if(!t.isGroup)return t.checked=t.disabled?!1:!!e,t.isPartialChecked=!1,t.checked;let i=s.filter(l=>l.childOf===t.id);return!e||t.disabled||t.isPartialChecked?(t.checked=!1,t.isPartialChecked=!1,Re(t,i,s),t.checked):Ds(i,s)?$s(i)?(t.checked=!1,t.isPartialChecked=!1,t.disabled=!0,t.checked):(t.checked=!1,t.isPartialChecked=!0,i.forEach(l=>{Gs(e,l,s)}),t.checked):(t.checked=!0,t.isPartialChecked=!1,Re(t,i,s),t.checked)},Is=(e,t)=>{let s=t.find(i=>i.id===e.childOf);s&&(ri(s,t),Is(s,t))},ri=(e,t)=>{let s=ue(e,t);if($s(s)){e.checked=!1,e.isPartialChecked=!1,e.disabled=!0;return}if(di(s)){e.checked=!0,e.isPartialChecked=!1;return}if(ui(s)){e.checked=!1,e.isPartialChecked=!0;return}e.checked=!1,e.isPartialChecked=!1},Re=({checked:e,disabled:t},s,i)=>{s.forEach(l=>{l.disabled=!!t||!!l.disabled,l.checked=!!e&&!l.disabled,l.isPartialChecked=!1;let o=ue(l,i);Re({checked:e,disabled:t},o,i)})},Ds=(e,t)=>e.some(s=>s.disabled)?!0:e.some(s=>{if(s.isGroup){let i=ue(s,t);return Ds(i,t)}return!1}),$s=e=>e.every(t=>!!t.disabled),di=e=>e.every(t=>!!t.checked),ui=e=>e.some(t=>!!t.checked||!!t.isPartialChecked),pi=e=>{e.forEach(t=>{t.checked=!1,t.isPartialChecked=!1})},mi=(e,t,s)=>{let i={level:0,groupId:""},l=qs(e,t,i.groupId,i.level);return ki(l,s)},qs=(e,t,s,i)=>e.reduce((l,o)=>{var r;let p=!!((r=o.children)!=null&&r.length),w=i>=t&&p,f=i>t;if(l.push({id:o.value,name:o.name,childOf:s,isGroup:p,checked:!1,isPartialChecked:!1,level:i,isClosed:w,hidden:f,disabled:o.disabled??!1}),p){let k=qs(o.children,t,o.value,i+1);l.push(...k)}return l},[]),ue=({id:e},t)=>t.filter(s=>s.childOf===e),wi=e=>{let{ungroupedNodes:t,allGroupedNodes:s,allNodes:i}=e.reduce((o,r)=>(r.checked&&(o.allNodes.push(r),r.isGroup?o.allGroupedNodes.push(r):o.ungroupedNodes.push(r)),o),{ungroupedNodes:[],allGroupedNodes:[],allNodes:[]}),l=i.filter(o=>!s.some(({id:r})=>r===o.childOf));return{ungroupedNodes:t,groupedNodes:l,allNodes:i}},ki=(e,t)=>(e.filter(s=>!!s.disabled).forEach(({id:s})=>Ht({id:s,checked:!1},e,t)),e),pe=(e,{id:t,isClosed:s})=>{ue({id:t},e).forEach(i=>{i.hidden=s??!1,i.isGroup&&!i.isClosed&&pe(e,{id:i.id,isClosed:s})})},vi=e=>{e.filter(t=>t.isGroup&&!t.disabled&&(t.checked||t.isPartialChecked)).forEach(t=>{t.isClosed=!1,pe(e,t)})},fi=(e,t)=>{let s=bi(e,t);e.forEach(i=>{s.some(({id:l})=>l===i.id)?(i.isGroup&&(i.isClosed=!1,pe(e,i)),i.hidden=!1):i.hidden=!0})},bi=(e,t)=>e.reduce((s,i)=>{if(i.name.toLowerCase().includes(t.toLowerCase())){if(s.push(i),i.isGroup){let l=js(i.id,e);s.push(...l)}if(i.childOf){let l=Rs(i.childOf,e);s.push(...l)}}return s},[]),js=(e,t)=>t.reduce((s,i)=>(i.childOf===e&&(s.push(i),i.isGroup&&s.push(...js(i.id,t))),s),[]),Rs=(e,t)=>t.reduce((s,i)=>(i.id===e&&(s.push(i),i.childOf&&s.push(...Rs(i.childOf,t))),s),[]),gi=e=>{let{duplications:t}=e.reduce((s,i)=>(s.allItems.some(l=>l.toString()===i.id.toString())&&s.duplications.push(i.id),s.allItems.push(i.id),s),{duplications:[],allItems:[]});t.length&&console.error(`Validation: You have duplicated values: ${t.join(", ")}! You should use unique values.`)},Ci=(e,t,s,i,l,o,r,p,w)=>{Ms(e,t,l,w),p&&r&&vi(t),ae(t,s,i,o)},ae=(e,t,s,i)=>{e.forEach(l=>{let o=t.querySelector(`[input-id="${l.id}"]`),r=_(o);o.checked=l.checked,Ei(l,r,i),Si(l,r),Li(l,r),yi(l,r,s),xi(l,r),Wi(l,r,e),_i(l,o,s)}),Ti(e,t)},Ei=(e,t,s)=>{e.checked?t.classList.add("treeselect-list__item--checked"):t.classList.remove("treeselect-list__item--checked"),Array.isArray(s)&&s[0]===e.id&&!e.disabled?t.classList.add("treeselect-list__item--single-selected"):t.classList.remove("treeselect-list__item--single-selected")},Si=(e,t)=>{e.isPartialChecked?t.classList.add("treeselect-list__item--partial-checked"):t.classList.remove("treeselect-list__item--partial-checked")},Li=(e,t)=>{e.disabled?t.classList.add("treeselect-list__item--disabled"):t.classList.remove("treeselect-list__item--disabled")},yi=(e,t,s)=>{if(e.isGroup){let i=t.querySelector(".treeselect-list__item-icon"),l=e.isClosed?s.arrowRight:s.arrowDown;T(l,i),e.isClosed?t.classList.add("treeselect-list__item--closed"):t.classList.remove("treeselect-list__item--closed")}},xi=(e,t)=>{e.hidden?t.classList.add("treeselect-list__item--hidden"):t.classList.remove("treeselect-list__item--hidden")},_i=(e,t,s)=>{let i=t.parentNode.querySelector(".treeselect-list__item-checkbox-icon");e.checked?T(s.check,i):e.isPartialChecked?T(s.partialCheck,i):i.innerHTML=""},Wi=(e,t,s)=>{let i=e.level===0,l=20,o=5;if(i){let r=s.some(w=>w.isGroup&&w.level===e.level),p=!e.isGroup&&r?`${l}px`:`${o}px`;t.style.paddingLeft=e.isGroup?"0":p}else t.style.paddingLeft=e.isGroup?`${e.level*l}px`:`${e.level*l+l}px`;t.setAttribute("level",e.level.toString()),t.setAttribute("group",e.isGroup.toString())},Ti=(e,t)=>{let s=e.some(l=>!l.hidden),i=t.querySelector(".treeselect-list__empty");s?i.classList.add("treeselect-list__empty--hidden"):i.classList.remove("treeselect-list__empty--hidden")},_=e=>e.parentNode.parentNode,Xt=(e,t)=>t.find(s=>s.id.toString()===e),Oi=e=>_(e).querySelector(".treeselect-list__item-icon"),Ni=(e,t)=>{t&&Object.keys(t).forEach(s=>{let i=t[s];typeof i=="string"&&e.setAttribute(s,i)})},G,H,W,K,Fe,Fs,Ue,Us,ze,zs,Ye,Qt,Je,Zt,Ke,es,X,ve,Xe,ts,Qe,ss,Ze,is,Q,fe,et,ls,tt,ns,st,as,it,hs,lt,cs,nt,os,at,rs,ht,ds,ct,us,ot,ps,rt,ms,Z,be,he,dt,ut,ws,pt=class{constructor({options:t,value:s,openLevel:i,listSlotHtmlComponent:l,emptyText:o,isSingleSelect:r,iconElements:p,showCount:w,disabledBranchNode:f,expandSelected:k,isIndependentNodes:v,inputCallback:b,arrowClickCallback:g,mouseupCallback:C}){h(this,Fe),h(this,Ue),h(this,ze),h(this,Ye),h(this,Je),h(this,Ke),h(this,X),h(this,Xe),h(this,Qe),h(this,Ze),h(this,Q),h(this,et),h(this,tt),h(this,st),h(this,it),h(this,lt),h(this,nt),h(this,at),h(this,ht),h(this,ct),h(this,ot),h(this,rt),h(this,Z),h(this,he),h(this,ut),c(this,"options"),c(this,"value"),c(this,"openLevel"),c(this,"listSlotHtmlComponent"),c(this,"emptyText"),c(this,"isSingleSelect"),c(this,"showCount"),c(this,"disabledBranchNode"),c(this,"expandSelected"),c(this,"isIndependentNodes"),c(this,"iconElements"),c(this,"searchText"),c(this,"flattedOptions"),c(this,"flattedOptionsBeforeSearch"),c(this,"selectedNodes"),c(this,"srcElement"),c(this,"inputCallback"),c(this,"arrowClickCallback"),c(this,"mouseupCallback"),h(this,G,null),h(this,H,!0),h(this,W,[]),h(this,K,!0),this.options=t,this.value=s,this.openLevel=i??0,this.listSlotHtmlComponent=l??null,this.emptyText=o??"No results found...",this.isSingleSelect=r??!1,this.showCount=w??!1,this.disabledBranchNode=f??!1,this.expandSelected=k??!1,this.isIndependentNodes=v??!1,this.iconElements=p,this.searchText="",this.flattedOptions=mi(this.options,this.openLevel,this.isIndependentNodes),this.flattedOptionsBeforeSearch=this.flattedOptions,this.selectedNodes={nodes:[],groupedNodes:[],allNodes:[]},this.srcElement=a(this,ze,zs).call(this),this.inputCallback=b,this.arrowClickCallback=g,this.mouseupCallback=C,gi(this.flattedOptions)}updateValue(t){this.value=t,m(this,W,this.isSingleSelect?this.value:[]),Ci(t,this.flattedOptions,this.srcElement,this.iconElements,this.isSingleSelect,n(this,W),this.expandSelected,n(this,K),this.isIndependentNodes),m(this,K,!1),a(this,he,dt).call(this)}updateSearchValue(t){if(t===this.searchText)return;let s=this.searchText===""&&t!=="";this.searchText=t,s&&(this.flattedOptionsBeforeSearch=JSON.parse(JSON.stringify(this.flattedOptions))),this.searchText===""&&(this.flattedOptions=this.flattedOptionsBeforeSearch.map(i=>{let l=this.flattedOptions.find(o=>o.id===i.id);return l.isClosed=i.isClosed,l.hidden=i.hidden,l}),this.flattedOptionsBeforeSearch=[]),this.searchText&&fi(this.flattedOptions,t),ae(this.flattedOptions,this.srcElement,this.iconElements,n(this,W)),this.focusFirstListElement()}callKeyAction(t){m(this,H,!1);let s=this.srcElement.querySelector(".treeselect-list__item--focused");if(s?.classList.contains("treeselect-list__item--hidden"))return;let i=t.key;i==="Enter"&&s&&s.dispatchEvent(new Event("mousedown")),(i==="ArrowLeft"||i==="ArrowRight")&&a(this,Fe,Fs).call(this,s,t),(i==="ArrowDown"||i==="ArrowUp")&&a(this,Ue,Us).call(this,s,i)}focusFirstListElement(){let t="treeselect-list__item--focused",s=this.srcElement.querySelector(`.${t}`),i=Array.from(this.srcElement.querySelectorAll(".treeselect-list__item-checkbox")).filter(l=>window.getComputedStyle(_(l)).display!=="none");i.length&&(s&&s.classList.remove(t),_(i[0]).classList.add(t))}isLastFocusedElementExist(){return!!n(this,G)}};G=new WeakMap,H=new WeakMap,W=new WeakMap,K=new WeakMap,Fe=new WeakSet,Fs=function(e,t){if(!e)return;let s=t.key,i=e.querySelector(".treeselect-list__item-checkbox").getAttribute("input-id"),l=Xt(i,this.flattedOptions),o=e.querySelector(".treeselect-list__item-icon");s==="ArrowLeft"&&!l.isClosed&&l.isGroup&&(o.dispatchEvent(new Event("mousedown")),t.preventDefault()),s==="ArrowRight"&&l.isClosed&&l.isGroup&&(o.dispatchEvent(new Event("mousedown")),t.preventDefault())},Ue=new WeakSet,Us=function(e,t){var s;let i=Array.from(this.srcElement.querySelectorAll(".treeselect-list__item-checkbox")).filter(l=>window.getComputedStyle(_(l)).display!=="none");if(i.length)if(!e)_(i[0]).classList.add("treeselect-list__item--focused");else{let l=i.findIndex(g=>_(g).classList.contains("treeselect-list__item--focused"));_(i[l]).classList.remove("treeselect-list__item--focused");let o=t==="ArrowDown"?l+1:l-1,r=t==="ArrowDown"?0:i.length-1,p=i[o]??i[r],w=!i[o],f=_(p);f.classList.add("treeselect-list__item--focused");let k=this.srcElement.getBoundingClientRect(),v=f.getBoundingClientRect();if(w&&t==="ArrowDown"){this.srcElement.scroll(0,0);return}if(w&&t==="ArrowUp"){this.srcElement.scroll(0,this.srcElement.scrollHeight);return}let b=((s=this.listSlotHtmlComponent)==null?void 0:s.clientHeight)??0;if(k.y+k.height<v.y+v.height+b){this.srcElement.scroll(0,this.srcElement.scrollTop+v.height);return}if(k.y>v.y){this.srcElement.scroll(0,this.srcElement.scrollTop-v.height);return}}},ze=new WeakSet,zs=function(){let e=a(this,Ye,Qt).call(this),t=a(this,X,ve).call(this,this.options);e.append(...t);let s=a(this,Qe,ss).call(this);e.append(s);let i=a(this,Xe,ts).call(this);return i&&e.append(i),e},Ye=new WeakSet,Qt=function(){let e=document.createElement("div");return e.classList.add("treeselect-list"),this.isSingleSelect&&e.classList.add("treeselect-list--single-select"),this.disabledBranchNode&&e.classList.add("treeselect-list--disabled-branch-node"),e.addEventListener("mouseout",t=>a(this,Je,Zt).call(this,t)),e.addEventListener("mousemove",()=>a(this,Ke,es).call(this)),e.addEventListener("mouseup",()=>this.mouseupCallback(),!0),e},Je=new WeakSet,Zt=function(e){e.stopPropagation(),n(this,G)&&n(this,H)&&n(this,G).classList.add("treeselect-list__item--focused")},Ke=new WeakSet,es=function(){m(this,H,!0)},X=new WeakSet,ve=function(e){return e.reduce((t,s)=>{var i;if((i=s.children)!=null&&i.length){let o=a(this,Ze,is).call(this,s),r=a(this,X,ve).call(this,s.children);return o.append(...r),t.push(o),t}let l=a(this,Q,fe).call(this,s,!1);return t.push(l),t},[])},Xe=new WeakSet,ts=function(){if(!this.listSlotHtmlComponent)return null;let e=document.createElement("div");return e.classList.add("treeselect-list__slot"),e.appendChild(this.listSlotHtmlComponent),e},Qe=new WeakSet,ss=function(){let e=document.createElement("div");e.classList.add("treeselect-list__empty"),e.setAttribute("title",this.emptyText);let t=document.createElement("span");t.classList.add("treeselect-list__empty-icon"),T(this.iconElements.attention,t);let s=document.createElement("span");return s.classList.add("treeselect-list__empty-text"),s.textContent=this.emptyText,e.append(t,s),e},Ze=new WeakSet,is=function(e){let t=document.createElement("div");t.setAttribute("group-container-id",e.value.toString()),t.classList.add("treeselect-list__group-container");let s=a(this,Q,fe).call(this,e,!0);return t.appendChild(s),t},Q=new WeakSet,fe=function(e,t){let s=a(this,et,ls).call(this,e);if(t){let o=a(this,lt,cs).call(this);s.appendChild(o),s.classList.add("treeselect-list__item--group")}let i=a(this,at,rs).call(this,e),l=a(this,ht,ds).call(this,e,t);return s.append(i,l),s},et=new WeakSet,ls=function(e){let t=document.createElement("div");return Ni(t,e.htmlAttr),t.setAttribute("tabindex","-1"),t.setAttribute("title",e.name),t.classList.add("treeselect-list__item"),t.addEventListener("mouseover",()=>a(this,tt,ns).call(this,t),!0),t.addEventListener("mouseout",()=>a(this,st,as).call(this,t),!0),t.addEventListener("mousedown",s=>a(this,it,hs).call(this,s,e)),t},tt=new WeakSet,ns=function(e){n(this,H)&&a(this,Z,be).call(this,!0,e)},st=new WeakSet,as=function(e){n(this,H)&&(a(this,Z,be).call(this,!1,e),m(this,G,e))},it=new WeakSet,hs=function(e,t){var s;if(e.preventDefault(),e.stopPropagation(),(s=this.flattedOptions.find(l=>l.id===t.value))==null?void 0:s.disabled)return;let i=e.target.querySelector(".treeselect-list__item-checkbox");i.checked=!i.checked,a(this,ot,ps).call(this,i,t)},lt=new WeakSet,cs=function(){let e=document.createElement("span");return e.setAttribute("tabindex","-1"),e.classList.add("treeselect-list__item-icon"),T(this.iconElements.arrowDown,e),e.addEventListener("mousedown",t=>a(this,nt,os).call(this,t)),e},nt=new WeakSet,os=function(e){e.preventDefault(),e.stopPropagation(),a(this,rt,ms).call(this,e)},at=new WeakSet,rs=function(e){let t=document.createElement("div");t.classList.add("treeselect-list__item-checkbox-container");let s=document.createElement("span");s.classList.add("treeselect-list__item-checkbox-icon"),s.innerHTML="";let i=document.createElement("input");return i.setAttribute("tabindex","-1"),i.setAttribute("type","checkbox"),i.setAttribute("input-id",e.value.toString()),i.classList.add("treeselect-list__item-checkbox"),t.append(s,i),t},ht=new WeakSet,ds=function(e,t){let s=document.createElement("label");if(s.textContent=e.name,s.classList.add("treeselect-list__item-label"),t&&this.showCount){let i=a(this,ct,us).call(this,e);s.appendChild(i)}return s},ct=new WeakSet,us=function(e){let t=document.createElement("span"),s=this.flattedOptions.filter(i=>i.childOf===e.value);return t.textContent=`(${s.length})`,t.classList.add("treeselect-list__item-label-counter"),t},ot=new WeakSet,ps=function(e,t){let s=this.flattedOptions.find(i=>i.id===t.value);if(s){if(s!=null&&s.isGroup&&this.disabledBranchNode){let i=Oi(e);i?.dispatchEvent(new Event("mousedown"));return}if(this.isSingleSelect){let[i]=n(this,W);if(s.id===i)return;m(this,W,[s.id]),Ms([s.id],this.flattedOptions,this.isSingleSelect,this.isIndependentNodes)}else{s.checked=e.checked;let i=Ht(s,this.flattedOptions,this.isIndependentNodes);e.checked=i}ae(this.flattedOptions,this.srcElement,this.iconElements,n(this,W)),a(this,ut,ws).call(this)}},rt=new WeakSet,ms=function(e){var t,s;let i=(s=(t=e.target)==null?void 0:t.parentNode)==null?void 0:s.querySelector("[input-id]"),l=i?.getAttribute("input-id")??null,o=Xt(l,this.flattedOptions);o&&(o.isClosed=!o.isClosed,pe(this.flattedOptions,o),ae(this.flattedOptions,this.srcElement,this.iconElements,n(this,W)),this.arrowClickCallback())},Z=new WeakSet,be=function(e,t){let s="treeselect-list__item--focused";if(e){let i=Array.from(this.srcElement.querySelectorAll(`.${s}`));i.length&&i.forEach(l=>l.classList.remove(s)),t.classList.add(s)}else t.classList.remove(s)},he=new WeakSet,dt=function(){let{ungroupedNodes:e,groupedNodes:t,allNodes:s}=wi(this.flattedOptions);this.selectedNodes={nodes:e,groupedNodes:t,allNodes:s}},ut=new WeakSet,ws=function(){a(this,he,dt).call(this),this.inputCallback(this.selectedNodes),this.value=this.selectedNodes.nodes.map(e=>e.id)};var ks=({parentHtmlContainer:e,staticList:t,appendToBody:s,isSingleSelect:i,value:l,direction:o})=>{e||console.error("Validation: parentHtmlContainer prop is required!"),t&&s&&console.error("Validation: You should set staticList to false if you use appendToBody!"),i&&Array.isArray(l)&&console.error("Validation: if you use isSingleSelect prop, you should pass a single value!"),!i&&!Array.isArray(l)&&console.error("Validation: you should pass an array as a value!"),o&&o!=="auto"&&o!=="bottom"&&o!=="top"&&console.error("Validation: you should pass (auto | top | bottom | undefined) as a value for the direction prop!")},Y=e=>e.map(t=>t.id),Ai=e=>e?Array.isArray(e)?e:[e]:[],Bi=(e,t)=>{if(t){let[s]=e;return s??null}return e},d,u,D,ee,$,y,x,E,A,te,mt,se,ge,wt,vs,kt,fs,vt,bs,ft,gs,bt,Cs,gt,Es,ce,Ct,Et,Ss,St,Ls,Lt,ys,yt,xs,oe,xt,_t,Ys,F,re,ie,Ce,q,le,Wt,_s,ne,Ee,Tt,Ws,Ot,Ts,Nt,Os,At,Ns,de=class{constructor({parentHtmlContainer:t,value:s,options:i,openLevel:l,appendToBody:o,alwaysOpen:r,showTags:p,tagsCountText:w,clearable:f,searchable:k,placeholder:v,grouped:b,isGroupedValue:g,listSlotHtmlComponent:C,disabled:P,emptyText:me,staticList:U,id:we,ariaLabel:ke,isSingleSelect:z,showCount:Js,disabledBranchNode:Ks,direction:Xs,expandSelected:Qs,saveScrollPosition:Zs,isIndependentNodes:ei,iconElements:ti,inputCallback:si,openCallback:ii,closeCallback:li,nameChangeCallback:ni,searchCallback:ai}){h(this,te),h(this,se),h(this,wt),h(this,kt),h(this,vt),h(this,ft),h(this,bt),h(this,gt),h(this,ce),h(this,Et),h(this,St),h(this,Lt),h(this,yt),h(this,oe),h(this,_t),h(this,F),h(this,ie),h(this,q),h(this,Wt),h(this,ne),h(this,Tt),h(this,Ot),h(this,Nt),h(this,At),c(this,"parentHtmlContainer"),c(this,"value"),c(this,"options"),c(this,"openLevel"),c(this,"appendToBody"),c(this,"alwaysOpen"),c(this,"showTags"),c(this,"tagsCountText"),c(this,"clearable"),c(this,"searchable"),c(this,"placeholder"),c(this,"grouped"),c(this,"isGroupedValue"),c(this,"listSlotHtmlComponent"),c(this,"disabled"),c(this,"emptyText"),c(this,"staticList"),c(this,"id"),c(this,"ariaLabel"),c(this,"isSingleSelect"),c(this,"showCount"),c(this,"disabledBranchNode"),c(this,"direction"),c(this,"expandSelected"),c(this,"saveScrollPosition"),c(this,"isIndependentNodes"),c(this,"iconElements"),c(this,"inputCallback"),c(this,"openCallback"),c(this,"closeCallback"),c(this,"nameChangeCallback"),c(this,"searchCallback"),c(this,"ungroupedValue"),c(this,"groupedValue"),c(this,"allValue"),c(this,"isListOpened"),c(this,"selectedName"),c(this,"srcElement"),h(this,d,null),h(this,u,null),h(this,D,null),h(this,ee,0),h(this,$,0),h(this,y,null),h(this,x,null),h(this,E,null),h(this,A,null),ks({parentHtmlContainer:t,value:s,staticList:U,appendToBody:o,isSingleSelect:z}),this.parentHtmlContainer=t,this.value=[],this.options=i??[],this.openLevel=l??0,this.appendToBody=o??!1,this.alwaysOpen=!!(r&&!P),this.showTags=p??!0,this.tagsCountText=w??"elements selected",this.clearable=f??!0,this.searchable=k??!0,this.placeholder=v??"Search...",this.grouped=b??!0,this.isGroupedValue=g??!1,this.listSlotHtmlComponent=C??null,this.disabled=P??!1,this.emptyText=me??"No results found...",this.staticList=!!(U&&!this.appendToBody),this.id=we??"",this.ariaLabel=ke??"",this.isSingleSelect=z??!1,this.showCount=Js??!1,this.disabledBranchNode=Ks??!1,this.direction=Xs??"auto",this.expandSelected=Qs??!1,this.saveScrollPosition=Zs??!0,this.isIndependentNodes=ei??!1,this.iconElements=Vt(ti),this.inputCallback=si,this.openCallback=ii,this.closeCallback=li,this.nameChangeCallback=ni,this.searchCallback=ai,this.ungroupedValue=[],this.groupedValue=[],this.allValue=[],this.isListOpened=!1,this.selectedName="",this.srcElement=null,a(this,te,mt).call(this,s)}mount(){ks({parentHtmlContainer:this.parentHtmlContainer,value:this.value,staticList:this.staticList,appendToBody:this.appendToBody,isSingleSelect:this.isSingleSelect}),this.iconElements=Vt(this.iconElements),a(this,te,mt).call(this,this.value)}updateValue(t){let s=Ai(t),i=n(this,d);i&&(i.updateValue(s),a(this,ce,Ct).call(this,i?.selectedNodes))}destroy(){this.srcElement&&(a(this,oe,xt).call(this),this.srcElement.innerHTML="",this.srcElement=null,a(this,q,le).call(this,!0))}focus(){n(this,u)&&n(this,u).focus()}toggleOpenClose(){n(this,u)&&(n(this,u).openClose(),n(this,u).focus())}scrollWindowHandler(){this.updateListPosition()}focusWindowHandler(t){var s,i,l;(s=this.srcElement)!=null&&s.contains(t.target)||(i=n(this,d))!=null&&i.srcElement.contains(t.target)||((l=n(this,u))==null||l.blur(),a(this,q,le).call(this,!1),a(this,F,re).call(this,!1))}blurWindowHandler(){var t;(t=n(this,u))==null||t.blur(),a(this,q,le).call(this,!1),a(this,F,re).call(this,!1)}updateListPosition(){var t;let s=this.srcElement,i=(t=n(this,d))==null?void 0:t.srcElement;if(!s||!i)return;let{height:l}=i.getBoundingClientRect(),{x:o,y:r,height:p,width:w}=s.getBoundingClientRect(),f=window.innerHeight,k=r,v=f-r-p,b=k>v&&k>=l&&v<l;if(this.direction!=="auto"&&(b=this.direction==="top"),this.appendToBody){(i.style.top!=="0px"||i.style.left!=="0px")&&(i.style.top="0px",i.style.left="0px");let C=o+window.scrollX,P=b?r+window.scrollY-l:r+window.scrollY+p;i.style.transform=`translate(${C}px,${P}px)`,i.style.width=`${w}px`}let g=b?"top":"bottom";i.getAttribute("direction")!==g&&(i.setAttribute("direction",g),a(this,_t,Ys).call(this,b,this.appendToBody))}};d=new WeakMap,u=new WeakMap,D=new WeakMap,ee=new WeakMap,$=new WeakMap,y=new WeakMap,x=new WeakMap,E=new WeakMap,A=new WeakMap,te=new WeakSet,mt=function(e){var t;this.destroy();let{container:s,list:i,input:l}=a(this,wt,vs).call(this);this.srcElement=s,m(this,d,i),m(this,u,l),m(this,y,this.scrollWindowHandler.bind(this)),m(this,x,this.scrollWindowHandler.bind(this)),m(this,E,this.focusWindowHandler.bind(this)),m(this,A,this.blurWindowHandler.bind(this)),this.alwaysOpen&&((t=n(this,u))==null||t.openClose()),this.disabled?this.srcElement.classList.add("treeselect--disabled"):this.srcElement.classList.remove("treeselect--disabled"),this.updateValue(e??this.value)},se=new WeakSet,ge=function({groupedNodes:e,nodes:t,allNodes:s}){this.ungroupedValue=t?Y(t):[],this.groupedValue=e?Y(e):[],this.allValue=s?Y(s):[];let i=[];this.isIndependentNodes||this.isSingleSelect?i=this.allValue:this.isGroupedValue?i=this.groupedValue:i=this.ungroupedValue,this.value=Bi(i,this.isSingleSelect)},wt=new WeakSet,vs=function(){let e=this.parentHtmlContainer;e.classList.add("treeselect");let t=new pt({value:[],options:this.options,openLevel:this.openLevel,listSlotHtmlComponent:this.listSlotHtmlComponent,emptyText:this.emptyText,isSingleSelect:this.isSingleSelect,showCount:this.showCount,disabledBranchNode:this.disabledBranchNode,expandSelected:this.expandSelected,isIndependentNodes:this.isIndependentNodes,iconElements:this.iconElements,inputCallback:i=>a(this,Et,Ss).call(this,i),arrowClickCallback:()=>a(this,St,Ls).call(this),mouseupCallback:()=>{var i;return(i=n(this,u))==null?void 0:i.focus()}}),s=new je({value:[],showTags:this.showTags,tagsCountText:this.tagsCountText,clearable:this.clearable,isAlwaysOpened:this.alwaysOpen,searchable:this.searchable,placeholder:this.placeholder,disabled:this.disabled,isSingleSelect:this.isSingleSelect,id:this.id,ariaLabel:this.ariaLabel,iconElements:this.iconElements,inputCallback:i=>a(this,kt,fs).call(this,i),searchCallback:i=>a(this,ft,gs).call(this,i),openCallback:()=>a(this,yt,xs).call(this),closeCallback:()=>a(this,oe,xt).call(this),keydownCallback:i=>a(this,vt,bs).call(this,i),focusCallback:()=>a(this,bt,Cs).call(this),blurCallback:()=>a(this,gt,Es).call(this),nameChangeCallback:i=>a(this,Lt,ys).call(this,i)});return this.appendToBody&&m(this,D,new ResizeObserver(()=>this.updateListPosition())),e.append(s.srcElement),{container:e,list:t,input:s}},kt=new WeakSet,fs=function(e){var t,s;let i=Y(e);(t=n(this,d))==null||t.updateValue(i);let l=((s=n(this,d))==null?void 0:s.selectedNodes)??{};a(this,se,ge).call(this,l),a(this,ne,Ee).call(this)},vt=new WeakSet,bs=function(e){var t;this.isListOpened&&((t=n(this,d))==null||t.callKeyAction(e))},ft=new WeakSet,gs=function(e){n(this,$)&&clearTimeout(n(this,$)),m(this,$,window.setTimeout(()=>{var t;(t=n(this,d))==null||t.updateSearchValue(e),this.updateListPosition()},350)),a(this,At,Ns).call(this,e)},bt=new WeakSet,Cs=function(){a(this,F,re).call(this,!0),n(this,E)&&n(this,E)&&n(this,A)&&(document.addEventListener("mousedown",n(this,E),!0),document.addEventListener("focus",n(this,E),!0),window.addEventListener("blur",n(this,A)))},gt=new WeakSet,Es=function(){setTimeout(()=>{var e,t;let s=(e=n(this,u))==null?void 0:e.srcElement.contains(document.activeElement),i=(t=n(this,d))==null?void 0:t.srcElement.contains(document.activeElement);!s&&!i&&this.blurWindowHandler()},1)},ce=new WeakSet,Ct=function(e){var t;if(!e)return;let s=[];this.isIndependentNodes||this.isSingleSelect?s=e.allNodes:this.grouped?s=e.groupedNodes:s=e.nodes,(t=n(this,u))==null||t.updateValue(s),a(this,se,ge).call(this,e)},Et=new WeakSet,Ss=function(e){var t,s,i;a(this,ce,Ct).call(this,e),this.isSingleSelect&&!this.alwaysOpen&&((t=n(this,u))==null||t.openClose(),(s=n(this,u))==null||s.clearSearch()),(i=n(this,u))==null||i.focus(),a(this,ne,Ee).call(this)},St=new WeakSet,Ls=function(){var e;(e=n(this,u))==null||e.focus(),this.updateListPosition()},Lt=new WeakSet,ys=function(e){this.selectedName!==e&&(this.selectedName=e,a(this,Tt,Ws).call(this))},yt=new WeakSet,xs=function(){var e;this.isListOpened=!0,n(this,y)&&n(this,x)&&(window.addEventListener("scroll",n(this,y),!0),window.addEventListener("resize",n(this,x))),!(!n(this,d)||!this.srcElement)&&(this.appendToBody?(document.body.appendChild(n(this,d).srcElement),(e=n(this,D))==null||e.observe(this.srcElement)):this.srcElement.appendChild(n(this,d).srcElement),this.updateListPosition(),a(this,ie,Ce).call(this,!0),a(this,Wt,_s).call(this),a(this,Ot,Ts).call(this))},oe=new WeakSet,xt=function(){var e;this.alwaysOpen||(this.isListOpened=!1,n(this,y)&&n(this,x)&&(window.removeEventListener("scroll",n(this,y),!0),window.removeEventListener("resize",n(this,x))),!n(this,d)||!this.srcElement)||!(this.appendToBody?document.body.contains(n(this,d).srcElement):this.srcElement.contains(n(this,d).srcElement))||(m(this,ee,n(this,d).srcElement.scrollTop),this.appendToBody?(document.body.removeChild(n(this,d).srcElement),(e=n(this,D))==null||e.disconnect()):this.srcElement.removeChild(n(this,d).srcElement),a(this,ie,Ce).call(this,!1),a(this,Nt,Os).call(this))},_t=new WeakSet,Ys=function(e,t){if(!n(this,d)||!n(this,u))return;let s=t?"treeselect-list--top-to-body":"treeselect-list--top",i=t?"treeselect-list--bottom-to-body":"treeselect-list--bottom";e?(n(this,d).srcElement.classList.add(s),n(this,d).srcElement.classList.remove(i),n(this,u).srcElement.classList.add("treeselect-input--top"),n(this,u).srcElement.classList.remove("treeselect-input--bottom")):(n(this,d).srcElement.classList.remove(s),n(this,d).srcElement.classList.add(i),n(this,u).srcElement.classList.remove("treeselect-input--top"),n(this,u).srcElement.classList.add("treeselect-input--bottom"))},F=new WeakSet,re=function(e){!n(this,u)||!n(this,d)||(e?(n(this,u).srcElement.classList.add("treeselect-input--focused"),n(this,d).srcElement.classList.add("treeselect-list--focused")):(n(this,u).srcElement.classList.remove("treeselect-input--focused"),n(this,d).srcElement.classList.remove("treeselect-list--focused")))},ie=new WeakSet,Ce=function(e){var t,s,i,l;e?(t=n(this,u))==null||t.srcElement.classList.add("treeselect-input--opened"):(s=n(this,u))==null||s.srcElement.classList.remove("treeselect-input--opened"),this.staticList?(i=n(this,d))==null||i.srcElement.classList.add("treeselect-list--static"):(l=n(this,d))==null||l.srcElement.classList.remove("treeselect-list--static")},q=new WeakSet,le=function(e){!n(this,y)||!n(this,x)||!n(this,E)||!n(this,A)||((!this.alwaysOpen||e)&&(window.removeEventListener("scroll",n(this,y),!0),window.removeEventListener("resize",n(this,x))),document.removeEventListener("mousedown",n(this,E),!0),document.removeEventListener("focus",n(this,E),!0),window.removeEventListener("blur",n(this,A)))},Wt=new WeakSet,_s=function(){var e,t,s;let i=(e=n(this,d))==null?void 0:e.isLastFocusedElementExist();this.saveScrollPosition&&i?(t=n(this,d))==null||t.srcElement.scroll(0,n(this,ee)):(s=n(this,d))==null||s.focusFirstListElement()},ne=new WeakSet,Ee=function(){var e;(e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("input",{detail:this.value})),this.inputCallback&&this.inputCallback(this.value)},Tt=new WeakSet,Ws=function(){var e;(e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("name-change",{detail:this.selectedName})),this.nameChangeCallback&&this.nameChangeCallback(this.selectedName)},Ot=new WeakSet,Ts=function(){var e;this.alwaysOpen||((e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("open",{detail:this.value})),this.openCallback&&this.openCallback(this.value))},Nt=new WeakSet,Os=function(){var e;this.alwaysOpen||((e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("close",{detail:this.value})),this.closeCallback&&this.closeCallback(this.value))},At=new WeakSet,Ns=function(e){var t;let s=e?.trim()??"";(t=this.srcElement)==null||t.dispatchEvent(new CustomEvent("search",{detail:s})),this.searchCallback&&this.searchCallback(s)};function Hi({state:e,name:t,options:s,searchable:i,showCount:l,placeholder:o,disabledBranchNode:r,disabled:p=!1,isSingleSelect:w=!0,showTags:f=!0,clearable:k=!0,isIndependentNodes:v=!0,alwaysOpen:b=!1}){return{state:e,tree:null,init(){let g=this.isSingleSelect?this.state!==null?this.state:"":this.state!==null?this.state.split(","):"";this.tree=new de({id:`tree-${t}-id`,ariaLabel:`tree-${t}-label`,parentHtmlContainer:this.$refs.tree,value:g,options:s,searchable:i,showCount:l,placeholder:o,disabledBranchNode:r,disabled:p,isSingleSelect:w,showTags:f,clearable:k,isIndependentNodes:v,alwaysOpen:b}),this.tree.srcElement.addEventListener("input",C=>{Array.isArray(C.detail)?this.state=C.detail.join(","):this.state=C.detail})}}}export{Hi as default};
=======
var hi=Object.defineProperty,ci=(e,t,s)=>t in e?hi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,c=(e,t,s)=>(ci(e,typeof t!="symbol"?t+"":t,s),s),Bt=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},n=(e,t,s)=>(Bt(e,t,"read from private field"),s?s.call(e):t.get(e)),h=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},w=(e,t,s,i)=>(Bt(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s),a=(e,t,s)=>(Bt(e,t,"access private method"),s),Pt={arrowUp:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg>',arrowDown:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9l6 6 6-6"/></svg>',arrowRight:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>',attention:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',clear:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',cross:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',check:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>',partialCheck:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>'},O=(e,t)=>{if(t.innerHTML="",typeof e=="string")t.innerHTML=e;else{let s=e.cloneNode(!0);t.appendChild(s)}},Vt=e=>{let t=e?{...e}:{};return Object.keys(Pt).forEach(s=>{t[s]||(t[s]=Pt[s])}),t},oi=e=>e.reduce((t,{name:s},i)=>(t+=s,i<e.length-1&&(t+=", "),t),""),N,L,I,S,Se,As,V,j,Le,Mt,ye,Gt,M,R,A,H,xe,Bs,_e,It,We,Hs,Te,Dt,Oe,$t,Ne,qt,Ae,jt,Be,Rt,He,Ps,Pe,Ft,Ve,Ut,Me,Vs,Ge,zt,Ie,Yt,De,Jt,$e,Kt,J,qe,je=class{constructor({value:t,showTags:s,tagsCountText:i,clearable:l,isAlwaysOpened:o,searchable:r,placeholder:p,disabled:m,isSingleSelect:f,id:k,ariaLabel:v,iconElements:b,inputCallback:g,searchCallback:y,openCallback:C,closeCallback:me,keydownCallback:U,focusCallback:we,blurCallback:ke,nameChangeCallback:z}){h(this,Se),h(this,V),h(this,Le),h(this,ye),h(this,M),h(this,A),h(this,xe),h(this,_e),h(this,We),h(this,Te),h(this,Oe),h(this,Ne),h(this,Ae),h(this,Be),h(this,He),h(this,Pe),h(this,Ve),h(this,Me),h(this,Ge),h(this,Ie),h(this,De),h(this,$e),h(this,J),c(this,"value"),c(this,"showTags"),c(this,"tagsCountText"),c(this,"clearable"),c(this,"isAlwaysOpened"),c(this,"searchable"),c(this,"placeholder"),c(this,"disabled"),c(this,"isSingleSelect"),c(this,"id"),c(this,"ariaLabel"),c(this,"iconElements"),c(this,"isOpened"),c(this,"searchText"),c(this,"srcElement"),h(this,N,void 0),h(this,L,void 0),h(this,I,void 0),h(this,S,void 0),c(this,"inputCallback"),c(this,"searchCallback"),c(this,"openCallback"),c(this,"closeCallback"),c(this,"keydownCallback"),c(this,"focusCallback"),c(this,"blurCallback"),c(this,"nameChangeCallback"),this.value=t,this.showTags=s,this.tagsCountText=i,this.searchable=r,this.placeholder=p,this.clearable=l,this.isAlwaysOpened=o,this.disabled=m,this.isSingleSelect=f,this.id=k,this.ariaLabel=v,this.iconElements=b,this.isOpened=!1,this.searchText="",w(this,N,a(this,We,Hs).call(this)),w(this,L,a(this,He,Ps).call(this)),w(this,I,a(this,Me,Vs).call(this)),w(this,S,null),this.inputCallback=g,this.searchCallback=y,this.openCallback=C,this.closeCallback=me,this.keydownCallback=U,this.focusCallback=we,this.blurCallback=ke,this.nameChangeCallback=z,this.srcElement=a(this,xe,Bs).call(this,n(this,N),n(this,L),n(this,I)),a(this,Se,As).call(this)}focus(){setTimeout(()=>n(this,L).focus(),0)}blur(){this.isOpened&&a(this,A,H).call(this),this.clearSearch(),n(this,L).blur()}updateValue(t){this.value=t,a(this,V,j).call(this),a(this,M,R).call(this)}removeItem(t){this.value=this.value.filter(s=>s.id!==t),a(this,J,qe).call(this),a(this,V,j).call(this),a(this,M,R).call(this)}clear(){this.value=[],a(this,J,qe).call(this),a(this,V,j).call(this),this.clearSearch()}openClose(){a(this,A,H).call(this)}clearSearch(){this.searchText="",this.searchCallback(""),a(this,M,R).call(this)}};N=new WeakMap,L=new WeakMap,I=new WeakMap,S=new WeakMap,Se=new WeakSet,As=function(){a(this,V,j).call(this),a(this,M,R).call(this),a(this,Le,Mt).call(this)},V=new WeakSet,j=function(){if(n(this,N).innerHTML="",this.showTags){n(this,N).append(...a(this,Te,Dt).call(this));let e=oi(this.value);this.nameChangeCallback(e)}else{let e=a(this,Be,Rt).call(this);n(this,N).appendChild(e),this.nameChangeCallback(e.innerText)}n(this,N).appendChild(n(this,L))},Le=new WeakSet,Mt=function(){let e=[];n(this,I).innerHTML="",this.clearable&&e.push(a(this,Ge,zt).call(this)),this.isAlwaysOpened||e.push(a(this,De,Jt).call(this,this.isOpened)),e.length&&n(this,I).append(...e)},ye=new WeakSet,Gt=function(){if(!this.isAlwaysOpened&&n(this,S)){let e=this.isOpened?this.iconElements.arrowUp:this.iconElements.arrowDown;O(e,n(this,S))}},M=new WeakSet,R=function(){var e;(e=this.value)!=null&&e.length?(n(this,L).removeAttribute("placeholder"),this.srcElement.classList.remove("treeselect-input--value-not-selected")):(n(this,L).setAttribute("placeholder",this.placeholder),this.srcElement.classList.add("treeselect-input--value-not-selected")),this.searchable?this.srcElement.classList.remove("treeselect-input--unsearchable"):this.srcElement.classList.add("treeselect-input--unsearchable"),this.isSingleSelect?this.srcElement.classList.add("treeselect-input--is-single-select"):this.srcElement.classList.remove("treeselect-input--is-single-select"),n(this,L).value=this.searchText},A=new WeakSet,H=function(){this.isOpened=!this.isOpened,a(this,ye,Gt).call(this),this.isOpened?this.openCallback():this.closeCallback()},xe=new WeakSet,Bs=function(e,t,s){let i=document.createElement("div");return i.classList.add("treeselect-input"),i.setAttribute("tabindex","-1"),i.addEventListener("mousedown",l=>a(this,_e,It).call(this,l)),i.addEventListener("focus",()=>this.focusCallback(),!0),i.addEventListener("blur",()=>this.blurCallback(),!0),e.appendChild(t),i.append(e,s),i},_e=new WeakSet,It=function(e){e.stopPropagation(),this.isOpened||a(this,A,H).call(this),this.focus()},We=new WeakSet,Hs=function(){let e=document.createElement("div");return e.classList.add("treeselect-input__tags"),e},Te=new WeakSet,Dt=function(){return this.value.map(e=>{let t=document.createElement("div");t.classList.add("treeselect-input__tags-element"),t.setAttribute("tabindex","-1"),t.setAttribute("tag-id",e.id.toString()),t.setAttribute("title",e.name);let s=a(this,Ne,qt).call(this,e.name),i=a(this,Ae,jt).call(this);return t.addEventListener("mousedown",l=>a(this,Oe,$t).call(this,l,e.id)),t.append(s,i),t})},Oe=new WeakSet,$t=function(e,t){e.preventDefault(),e.stopPropagation(),this.removeItem(t),this.focus()},Ne=new WeakSet,qt=function(e){let t=document.createElement("span");return t.classList.add("treeselect-input__tags-name"),t.textContent=e,t},Ae=new WeakSet,jt=function(){let e=document.createElement("span");return e.classList.add("treeselect-input__tags-cross"),O(this.iconElements.cross,e),e},Be=new WeakSet,Rt=function(){let e=document.createElement("span");if(e.classList.add("treeselect-input__tags-count"),!this.value.length)return e.textContent="",e.setAttribute("title",""),e;let t=this.value.length===1?this.value[0].name:`${this.value.length} ${this.tagsCountText}`;return e.textContent=t,e.setAttribute("title",t),e},He=new WeakSet,Ps=function(){let e=document.createElement("input");return e.classList.add("treeselect-input__edit"),this.id&&e.setAttribute("id",this.id),(!this.searchable||this.disabled)&&e.setAttribute("readonly","readonly"),this.disabled&&e.setAttribute("tabindex","-1"),this.ariaLabel.length&&e.setAttribute("aria-label",this.ariaLabel),e.addEventListener("keydown",t=>a(this,Pe,Ft).call(this,t)),e.addEventListener("input",t=>a(this,Ve,Ut).call(this,t,e)),e},Pe=new WeakSet,Ft=function(e){e.stopPropagation();let t=e.key;t==="Backspace"&&!this.searchText.length&&this.value.length&&!this.showTags&&this.clear(),t==="Backspace"&&!this.searchText.length&&this.value.length&&this.removeItem(this.value[this.value.length-1].id),e.code==="Space"&&(!this.searchText||!this.searchable)&&a(this,A,H).call(this),(t==="Enter"||t==="ArrowDown"||t==="ArrowUp")&&e.preventDefault(),this.keydownCallback(e),t!=="Tab"&&this.focus()},Ve=new WeakSet,Ut=function(e,t){e.stopPropagation();let s=this.searchText,i=t.value.trim();if(s.length===0&&i.length===0){t.value="";return}if(this.searchable){let l=e.target.value;this.searchCallback(l),this.isOpened||a(this,A,H).call(this)}else t.value="";this.searchText=t.value},Me=new WeakSet,Vs=function(){let e=document.createElement("div");return e.classList.add("treeselect-input__operators"),e},Ge=new WeakSet,zt=function(){let e=document.createElement("span");return e.classList.add("treeselect-input__clear"),e.setAttribute("tabindex","-1"),O(this.iconElements.clear,e),e.addEventListener("mousedown",t=>a(this,Ie,Yt).call(this,t)),e},Ie=new WeakSet,Yt=function(e){e.preventDefault(),e.stopPropagation(),(this.searchText.length||this.value.length)&&this.clear(),this.focus()},De=new WeakSet,Jt=function(e){w(this,S,document.createElement("span")),n(this,S).classList.add("treeselect-input__arrow");let t=e?this.iconElements.arrowUp:this.iconElements.arrowDown;return O(t,n(this,S)),n(this,S).addEventListener("mousedown",s=>a(this,$e,Kt).call(this,s)),n(this,S)},$e=new WeakSet,Kt=function(e){e.stopPropagation(),e.preventDefault(),this.focus(),a(this,A,H).call(this)},J=new WeakSet,qe=function(){this.inputCallback(this.value)};var Ms=(e,t,s,i)=>{pi(t);let l=t.filter(o=>!o.disabled&&e.some(r=>r===o.id));if(s&&l.length){l[0].checked=!0;return}l.forEach(o=>{o.checked=!0;let r=Ht(o,t,i);o.checked=r})},Ht=({id:e,checked:t},s,i)=>{let l=s.find(r=>r.id===e);if(!l)return!1;if(i)return l.checked=l.disabled?!1:!!t,l.checked;let o=Gs(!!t,l,s);return Is(l,s),o},Gs=(e,t,s)=>{if(!t.isGroup)return t.checked=t.disabled?!1:!!e,t.isPartialChecked=!1,t.checked;let i=s.filter(l=>l.childOf===t.id);return!e||t.disabled||t.isPartialChecked?(t.checked=!1,t.isPartialChecked=!1,Re(t,i,s),t.checked):Ds(i,s)?$s(i)?(t.checked=!1,t.isPartialChecked=!1,t.disabled=!0,t.checked):(t.checked=!1,t.isPartialChecked=!0,i.forEach(l=>{Gs(e,l,s)}),t.checked):(t.checked=!0,t.isPartialChecked=!1,Re(t,i,s),t.checked)},Is=(e,t)=>{let s=t.find(i=>i.id===e.childOf);s&&(ri(s,t),Is(s,t))},ri=(e,t)=>{let s=ue(e,t);if($s(s)){e.checked=!1,e.isPartialChecked=!1,e.disabled=!0;return}if(di(s)){e.checked=!0,e.isPartialChecked=!1;return}if(ui(s)){e.checked=!1,e.isPartialChecked=!0;return}e.checked=!1,e.isPartialChecked=!1},Re=({checked:e,disabled:t},s,i)=>{s.forEach(l=>{l.disabled=!!t||!!l.disabled,l.checked=!!e&&!l.disabled,l.isPartialChecked=!1;let o=ue(l,i);Re({checked:e,disabled:t},o,i)})},Ds=(e,t)=>e.some(s=>s.disabled)?!0:e.some(s=>{if(s.isGroup){let i=ue(s,t);return Ds(i,t)}return!1}),$s=e=>e.every(t=>!!t.disabled),di=e=>e.every(t=>!!t.checked),ui=e=>e.some(t=>!!t.checked||!!t.isPartialChecked),pi=e=>{e.forEach(t=>{t.checked=!1,t.isPartialChecked=!1})},mi=(e,t,s)=>{let i={level:0,groupId:""},l=qs(e,t,i.groupId,i.level);return ki(l,s)},qs=(e,t,s,i)=>e.reduce((l,o)=>{var r;let p=!!((r=o.children)!=null&&r.length),m=i>=t&&p,f=i>t;if(l.push({id:o.value,name:o.name,childOf:s,isGroup:p,checked:!1,isPartialChecked:!1,level:i,isClosed:m,hidden:f,disabled:o.disabled??!1}),p){let k=qs(o.children,t,o.value,i+1);l.push(...k)}return l},[]),ue=({id:e},t)=>t.filter(s=>s.childOf===e),wi=e=>{let{ungroupedNodes:t,allGroupedNodes:s,allNodes:i}=e.reduce((o,r)=>(r.checked&&(o.allNodes.push(r),r.isGroup?o.allGroupedNodes.push(r):o.ungroupedNodes.push(r)),o),{ungroupedNodes:[],allGroupedNodes:[],allNodes:[]}),l=i.filter(o=>!s.some(({id:r})=>r===o.childOf));return{ungroupedNodes:t,groupedNodes:l,allNodes:i}},ki=(e,t)=>(e.filter(s=>!!s.disabled).forEach(({id:s})=>Ht({id:s,checked:!1},e,t)),e),pe=(e,{id:t,isClosed:s})=>{ue({id:t},e).forEach(i=>{i.hidden=s??!1,i.isGroup&&!i.isClosed&&pe(e,{id:i.id,isClosed:s})})},vi=e=>{e.filter(t=>t.isGroup&&!t.disabled&&(t.checked||t.isPartialChecked)).forEach(t=>{t.isClosed=!1,pe(e,t)})},fi=(e,t)=>{let s=bi(e,t);e.forEach(i=>{s.some(({id:l})=>l===i.id)?(i.isGroup&&(i.isClosed=!1,pe(e,i)),i.hidden=!1):i.hidden=!0})},bi=(e,t)=>e.reduce((s,i)=>{if(i.name.toLowerCase().includes(t.toLowerCase())){if(s.push(i),i.isGroup){let l=js(i.id,e);s.push(...l)}if(i.childOf){let l=Rs(i.childOf,e);s.push(...l)}}return s},[]),js=(e,t)=>t.reduce((s,i)=>(i.childOf===e&&(s.push(i),i.isGroup&&s.push(...js(i.id,t))),s),[]),Rs=(e,t)=>t.reduce((s,i)=>(i.id===e&&(s.push(i),i.childOf&&s.push(...Rs(i.childOf,t))),s),[]),gi=e=>{let{duplications:t}=e.reduce((s,i)=>(s.allItems.some(l=>l.toString()===i.id.toString())&&s.duplications.push(i.id),s.allItems.push(i.id),s),{duplications:[],allItems:[]});t.length&&console.error(`Validation: You have duplicated values: ${t.join(", ")}! You should use unique values.`)},Ci=(e,t,s,i,l,o,r,p,m)=>{Ms(e,t,l,m),p&&r&&vi(t),ae(t,s,i,o)},ae=(e,t,s,i)=>{e.forEach(l=>{let o=t.querySelector(`[input-id="${l.id}"]`),r=W(o);o.checked=l.checked,Ei(l,r,i),Si(l,r),Li(l,r),yi(l,r,s),xi(l,r),Wi(l,r,e),_i(l,o,s)}),Ti(e,t)},Ei=(e,t,s)=>{e.checked?t.classList.add("treeselect-list__item--checked"):t.classList.remove("treeselect-list__item--checked"),Array.isArray(s)&&s[0]===e.id&&!e.disabled?t.classList.add("treeselect-list__item--single-selected"):t.classList.remove("treeselect-list__item--single-selected")},Si=(e,t)=>{e.isPartialChecked?t.classList.add("treeselect-list__item--partial-checked"):t.classList.remove("treeselect-list__item--partial-checked")},Li=(e,t)=>{e.disabled?t.classList.add("treeselect-list__item--disabled"):t.classList.remove("treeselect-list__item--disabled")},yi=(e,t,s)=>{if(e.isGroup){let i=t.querySelector(".treeselect-list__item-icon"),l=e.isClosed?s.arrowRight:s.arrowDown;O(l,i),e.isClosed?t.classList.add("treeselect-list__item--closed"):t.classList.remove("treeselect-list__item--closed")}},xi=(e,t)=>{e.hidden?t.classList.add("treeselect-list__item--hidden"):t.classList.remove("treeselect-list__item--hidden")},_i=(e,t,s)=>{let i=t.parentNode.querySelector(".treeselect-list__item-checkbox-icon");e.checked?O(s.check,i):e.isPartialChecked?O(s.partialCheck,i):i.innerHTML=""},Wi=(e,t,s)=>{let i=e.level===0,l=20,o=5;if(i){let r=s.some(m=>m.isGroup&&m.level===e.level),p=!e.isGroup&&r?`${l}px`:`${o}px`;t.style.paddingLeft=e.isGroup?"0":p}else t.style.paddingLeft=e.isGroup?`${e.level*l}px`:`${e.level*l+l}px`;t.setAttribute("level",e.level.toString()),t.setAttribute("group",e.isGroup.toString())},Ti=(e,t)=>{let s=e.some(l=>!l.hidden),i=t.querySelector(".treeselect-list__empty");s?i.classList.add("treeselect-list__empty--hidden"):i.classList.remove("treeselect-list__empty--hidden")},W=e=>e.parentNode.parentNode,Xt=(e,t)=>t.find(s=>s.id.toString()===e),Oi=e=>W(e).querySelector(".treeselect-list__item-icon"),Ni=(e,t)=>{t&&Object.keys(t).forEach(s=>{let i=t[s];typeof i=="string"&&e.setAttribute(s,i)})},G,P,T,K,Fe,Fs,Ue,Us,ze,zs,Ye,Qt,Je,Zt,Ke,es,X,ve,Xe,ts,Qe,ss,Ze,is,Q,fe,et,ls,tt,ns,st,as,it,hs,lt,cs,nt,os,at,rs,ht,ds,ct,us,ot,ps,rt,ms,Z,be,he,dt,ut,ws,pt=class{constructor({options:t,value:s,openLevel:i,listSlotHtmlComponent:l,emptyText:o,isSingleSelect:r,iconElements:p,showCount:m,disabledBranchNode:f,expandSelected:k,isIndependentNodes:v,inputCallback:b,arrowClickCallback:g,mouseupCallback:y}){h(this,Fe),h(this,Ue),h(this,ze),h(this,Ye),h(this,Je),h(this,Ke),h(this,X),h(this,Xe),h(this,Qe),h(this,Ze),h(this,Q),h(this,et),h(this,tt),h(this,st),h(this,it),h(this,lt),h(this,nt),h(this,at),h(this,ht),h(this,ct),h(this,ot),h(this,rt),h(this,Z),h(this,he),h(this,ut),c(this,"options"),c(this,"value"),c(this,"openLevel"),c(this,"listSlotHtmlComponent"),c(this,"emptyText"),c(this,"isSingleSelect"),c(this,"showCount"),c(this,"disabledBranchNode"),c(this,"expandSelected"),c(this,"isIndependentNodes"),c(this,"iconElements"),c(this,"searchText"),c(this,"flattedOptions"),c(this,"flattedOptionsBeforeSearch"),c(this,"selectedNodes"),c(this,"srcElement"),c(this,"inputCallback"),c(this,"arrowClickCallback"),c(this,"mouseupCallback"),h(this,G,null),h(this,P,!0),h(this,T,[]),h(this,K,!0),this.options=t,this.value=s,this.openLevel=i??0,this.listSlotHtmlComponent=l??null,this.emptyText=o??"No results found...",this.isSingleSelect=r??!1,this.showCount=m??!1,this.disabledBranchNode=f??!1,this.expandSelected=k??!1,this.isIndependentNodes=v??!1,this.iconElements=p,this.searchText="",this.flattedOptions=mi(this.options,this.openLevel,this.isIndependentNodes),this.flattedOptionsBeforeSearch=this.flattedOptions,this.selectedNodes={nodes:[],groupedNodes:[],allNodes:[]},this.srcElement=a(this,ze,zs).call(this),this.inputCallback=b,this.arrowClickCallback=g,this.mouseupCallback=y,gi(this.flattedOptions)}updateValue(t){this.value=t,w(this,T,this.isSingleSelect?this.value:[]),Ci(t,this.flattedOptions,this.srcElement,this.iconElements,this.isSingleSelect,n(this,T),this.expandSelected,n(this,K),this.isIndependentNodes),w(this,K,!1),a(this,he,dt).call(this)}updateSearchValue(t){if(t===this.searchText)return;let s=this.searchText===""&&t!=="";this.searchText=t,s&&(this.flattedOptionsBeforeSearch=JSON.parse(JSON.stringify(this.flattedOptions))),this.searchText===""&&(this.flattedOptions=this.flattedOptionsBeforeSearch.map(i=>{let l=this.flattedOptions.find(o=>o.id===i.id);return l.isClosed=i.isClosed,l.hidden=i.hidden,l}),this.flattedOptionsBeforeSearch=[]),this.searchText&&fi(this.flattedOptions,t),ae(this.flattedOptions,this.srcElement,this.iconElements,n(this,T)),this.focusFirstListElement()}callKeyAction(t){w(this,P,!1);let s=this.srcElement.querySelector(".treeselect-list__item--focused");if(s?.classList.contains("treeselect-list__item--hidden"))return;let i=t.key;i==="Enter"&&s&&s.dispatchEvent(new Event("mousedown")),(i==="ArrowLeft"||i==="ArrowRight")&&a(this,Fe,Fs).call(this,s,t),(i==="ArrowDown"||i==="ArrowUp")&&a(this,Ue,Us).call(this,s,i)}focusFirstListElement(){let t="treeselect-list__item--focused",s=this.srcElement.querySelector(`.${t}`),i=Array.from(this.srcElement.querySelectorAll(".treeselect-list__item-checkbox")).filter(l=>window.getComputedStyle(W(l)).display!=="none");i.length&&(s&&s.classList.remove(t),W(i[0]).classList.add(t))}isLastFocusedElementExist(){return!!n(this,G)}};G=new WeakMap,P=new WeakMap,T=new WeakMap,K=new WeakMap,Fe=new WeakSet,Fs=function(e,t){if(!e)return;let s=t.key,i=e.querySelector(".treeselect-list__item-checkbox").getAttribute("input-id"),l=Xt(i,this.flattedOptions),o=e.querySelector(".treeselect-list__item-icon");s==="ArrowLeft"&&!l.isClosed&&l.isGroup&&(o.dispatchEvent(new Event("mousedown")),t.preventDefault()),s==="ArrowRight"&&l.isClosed&&l.isGroup&&(o.dispatchEvent(new Event("mousedown")),t.preventDefault())},Ue=new WeakSet,Us=function(e,t){var s;let i=Array.from(this.srcElement.querySelectorAll(".treeselect-list__item-checkbox")).filter(l=>window.getComputedStyle(W(l)).display!=="none");if(i.length)if(!e)W(i[0]).classList.add("treeselect-list__item--focused");else{let l=i.findIndex(g=>W(g).classList.contains("treeselect-list__item--focused"));W(i[l]).classList.remove("treeselect-list__item--focused");let o=t==="ArrowDown"?l+1:l-1,r=t==="ArrowDown"?0:i.length-1,p=i[o]??i[r],m=!i[o],f=W(p);f.classList.add("treeselect-list__item--focused");let k=this.srcElement.getBoundingClientRect(),v=f.getBoundingClientRect();if(m&&t==="ArrowDown"){this.srcElement.scroll(0,0);return}if(m&&t==="ArrowUp"){this.srcElement.scroll(0,this.srcElement.scrollHeight);return}let b=((s=this.listSlotHtmlComponent)==null?void 0:s.clientHeight)??0;if(k.y+k.height<v.y+v.height+b){this.srcElement.scroll(0,this.srcElement.scrollTop+v.height);return}if(k.y>v.y){this.srcElement.scroll(0,this.srcElement.scrollTop-v.height);return}}},ze=new WeakSet,zs=function(){let e=a(this,Ye,Qt).call(this),t=a(this,X,ve).call(this,this.options);e.append(...t);let s=a(this,Qe,ss).call(this);e.append(s);let i=a(this,Xe,ts).call(this);return i&&e.append(i),e},Ye=new WeakSet,Qt=function(){let e=document.createElement("div");return e.classList.add("treeselect-list"),this.isSingleSelect&&e.classList.add("treeselect-list--single-select"),this.disabledBranchNode&&e.classList.add("treeselect-list--disabled-branch-node"),e.addEventListener("mouseout",t=>a(this,Je,Zt).call(this,t)),e.addEventListener("mousemove",()=>a(this,Ke,es).call(this)),e.addEventListener("mouseup",()=>this.mouseupCallback(),!0),e},Je=new WeakSet,Zt=function(e){e.stopPropagation(),n(this,G)&&n(this,P)&&n(this,G).classList.add("treeselect-list__item--focused")},Ke=new WeakSet,es=function(){w(this,P,!0)},X=new WeakSet,ve=function(e){return e.reduce((t,s)=>{var i;if((i=s.children)!=null&&i.length){let o=a(this,Ze,is).call(this,s),r=a(this,X,ve).call(this,s.children);return o.append(...r),t.push(o),t}let l=a(this,Q,fe).call(this,s,!1);return t.push(l),t},[])},Xe=new WeakSet,ts=function(){if(!this.listSlotHtmlComponent)return null;let e=document.createElement("div");return e.classList.add("treeselect-list__slot"),e.appendChild(this.listSlotHtmlComponent),e},Qe=new WeakSet,ss=function(){let e=document.createElement("div");e.classList.add("treeselect-list__empty"),e.setAttribute("title",this.emptyText);let t=document.createElement("span");t.classList.add("treeselect-list__empty-icon"),O(this.iconElements.attention,t);let s=document.createElement("span");return s.classList.add("treeselect-list__empty-text"),s.textContent=this.emptyText,e.append(t,s),e},Ze=new WeakSet,is=function(e){let t=document.createElement("div");t.setAttribute("group-container-id",e.value.toString()),t.classList.add("treeselect-list__group-container");let s=a(this,Q,fe).call(this,e,!0);return t.appendChild(s),t},Q=new WeakSet,fe=function(e,t){let s=a(this,et,ls).call(this,e);if(t){let o=a(this,lt,cs).call(this);s.appendChild(o),s.classList.add("treeselect-list__item--group")}let i=a(this,at,rs).call(this,e),l=a(this,ht,ds).call(this,e,t);return s.append(i,l),s},et=new WeakSet,ls=function(e){let t=document.createElement("div");return Ni(t,e.htmlAttr),t.setAttribute("tabindex","-1"),t.setAttribute("title",e.name),t.classList.add("treeselect-list__item"),t.addEventListener("mouseover",()=>a(this,tt,ns).call(this,t),!0),t.addEventListener("mouseout",()=>a(this,st,as).call(this,t),!0),t.addEventListener("mousedown",s=>a(this,it,hs).call(this,s,e)),t},tt=new WeakSet,ns=function(e){n(this,P)&&a(this,Z,be).call(this,!0,e)},st=new WeakSet,as=function(e){n(this,P)&&(a(this,Z,be).call(this,!1,e),w(this,G,e))},it=new WeakSet,hs=function(e,t){var s;if(e.preventDefault(),e.stopPropagation(),(s=this.flattedOptions.find(l=>l.id===t.value))==null?void 0:s.disabled)return;let i=e.target.querySelector(".treeselect-list__item-checkbox");i.checked=!i.checked,a(this,ot,ps).call(this,i,t)},lt=new WeakSet,cs=function(){let e=document.createElement("span");return e.setAttribute("tabindex","-1"),e.classList.add("treeselect-list__item-icon"),O(this.iconElements.arrowDown,e),e.addEventListener("mousedown",t=>a(this,nt,os).call(this,t)),e},nt=new WeakSet,os=function(e){e.preventDefault(),e.stopPropagation(),a(this,rt,ms).call(this,e)},at=new WeakSet,rs=function(e){let t=document.createElement("div");t.classList.add("treeselect-list__item-checkbox-container");let s=document.createElement("span");s.classList.add("treeselect-list__item-checkbox-icon"),s.innerHTML="";let i=document.createElement("input");return i.setAttribute("tabindex","-1"),i.setAttribute("type","checkbox"),i.setAttribute("input-id",e.value.toString()),i.classList.add("treeselect-list__item-checkbox"),t.append(s,i),t},ht=new WeakSet,ds=function(e,t){let s=document.createElement("label");if(s.textContent=e.name,s.classList.add("treeselect-list__item-label"),t&&this.showCount){let i=a(this,ct,us).call(this,e);s.appendChild(i)}return s},ct=new WeakSet,us=function(e){let t=document.createElement("span"),s=this.flattedOptions.filter(i=>i.childOf===e.value);return t.textContent=`(${s.length})`,t.classList.add("treeselect-list__item-label-counter"),t},ot=new WeakSet,ps=function(e,t){let s=this.flattedOptions.find(i=>i.id===t.value);if(s){if(s!=null&&s.isGroup&&this.disabledBranchNode){let i=Oi(e);i?.dispatchEvent(new Event("mousedown"));return}if(this.isSingleSelect){let[i]=n(this,T);if(s.id===i)return;w(this,T,[s.id]),Ms([s.id],this.flattedOptions,this.isSingleSelect,this.isIndependentNodes)}else{s.checked=e.checked;let i=Ht(s,this.flattedOptions,this.isIndependentNodes);e.checked=i}ae(this.flattedOptions,this.srcElement,this.iconElements,n(this,T)),a(this,ut,ws).call(this)}},rt=new WeakSet,ms=function(e){var t,s;let i=(s=(t=e.target)==null?void 0:t.parentNode)==null?void 0:s.querySelector("[input-id]"),l=i?.getAttribute("input-id")??null,o=Xt(l,this.flattedOptions);o&&(o.isClosed=!o.isClosed,pe(this.flattedOptions,o),ae(this.flattedOptions,this.srcElement,this.iconElements,n(this,T)),this.arrowClickCallback())},Z=new WeakSet,be=function(e,t){let s="treeselect-list__item--focused";if(e){let i=Array.from(this.srcElement.querySelectorAll(`.${s}`));i.length&&i.forEach(l=>l.classList.remove(s)),t.classList.add(s)}else t.classList.remove(s)},he=new WeakSet,dt=function(){let{ungroupedNodes:e,groupedNodes:t,allNodes:s}=wi(this.flattedOptions);this.selectedNodes={nodes:e,groupedNodes:t,allNodes:s}},ut=new WeakSet,ws=function(){a(this,he,dt).call(this),this.inputCallback(this.selectedNodes),this.value=this.selectedNodes.nodes.map(e=>e.id)};var ks=({parentHtmlContainer:e,staticList:t,appendToBody:s,isSingleSelect:i,value:l,direction:o})=>{e||console.error("Validation: parentHtmlContainer prop is required!"),t&&s&&console.error("Validation: You should set staticList to false if you use appendToBody!"),i&&Array.isArray(l)&&console.error("Validation: if you use isSingleSelect prop, you should pass a single value!"),!i&&!Array.isArray(l)&&console.error("Validation: you should pass an array as a value!"),o&&o!=="auto"&&o!=="bottom"&&o!=="top"&&console.error("Validation: you should pass (auto | top | bottom | undefined) as a value for the direction prop!")},Y=e=>e.map(t=>t.id),Ai=e=>e?Array.isArray(e)?e:[e]:[],Bi=(e,t)=>{if(t){let[s]=e;return s??null}return e},d,u,D,ee,$,x,_,E,B,te,mt,se,ge,wt,vs,kt,fs,vt,bs,ft,gs,bt,Cs,gt,Es,ce,Ct,Et,Ss,St,Ls,Lt,ys,yt,xs,oe,xt,_t,Ys,F,re,ie,Ce,q,le,Wt,_s,ne,Ee,Tt,Ws,Ot,Ts,Nt,Os,At,Ns,de=class{constructor({parentHtmlContainer:t,value:s,options:i,openLevel:l,appendToBody:o,alwaysOpen:r,showTags:p,tagsCountText:m,clearable:f,searchable:k,placeholder:v,grouped:b,isGroupedValue:g,listSlotHtmlComponent:y,disabled:C,emptyText:me,staticList:U,id:we,ariaLabel:ke,isSingleSelect:z,showCount:Js,disabledBranchNode:Ks,direction:Xs,expandSelected:Qs,saveScrollPosition:Zs,isIndependentNodes:ei,iconElements:ti,inputCallback:si,openCallback:ii,closeCallback:li,nameChangeCallback:ni,searchCallback:ai}){h(this,te),h(this,se),h(this,wt),h(this,kt),h(this,vt),h(this,ft),h(this,bt),h(this,gt),h(this,ce),h(this,Et),h(this,St),h(this,Lt),h(this,yt),h(this,oe),h(this,_t),h(this,F),h(this,ie),h(this,q),h(this,Wt),h(this,ne),h(this,Tt),h(this,Ot),h(this,Nt),h(this,At),c(this,"parentHtmlContainer"),c(this,"value"),c(this,"options"),c(this,"openLevel"),c(this,"appendToBody"),c(this,"alwaysOpen"),c(this,"showTags"),c(this,"tagsCountText"),c(this,"clearable"),c(this,"searchable"),c(this,"placeholder"),c(this,"grouped"),c(this,"isGroupedValue"),c(this,"listSlotHtmlComponent"),c(this,"disabled"),c(this,"emptyText"),c(this,"staticList"),c(this,"id"),c(this,"ariaLabel"),c(this,"isSingleSelect"),c(this,"showCount"),c(this,"disabledBranchNode"),c(this,"direction"),c(this,"expandSelected"),c(this,"saveScrollPosition"),c(this,"isIndependentNodes"),c(this,"iconElements"),c(this,"inputCallback"),c(this,"openCallback"),c(this,"closeCallback"),c(this,"nameChangeCallback"),c(this,"searchCallback"),c(this,"ungroupedValue"),c(this,"groupedValue"),c(this,"allValue"),c(this,"isListOpened"),c(this,"selectedName"),c(this,"srcElement"),h(this,d,null),h(this,u,null),h(this,D,null),h(this,ee,0),h(this,$,0),h(this,x,null),h(this,_,null),h(this,E,null),h(this,B,null),ks({parentHtmlContainer:t,value:s,staticList:U,appendToBody:o,isSingleSelect:z}),this.parentHtmlContainer=t,this.value=[],this.options=i??[],this.openLevel=l??0,this.appendToBody=o??!1,this.alwaysOpen=!!(r&&!C),this.showTags=p??!0,this.tagsCountText=m??"elements selected",this.clearable=f??!0,this.searchable=k??!0,this.placeholder=v??"Search...",this.grouped=b??!0,this.isGroupedValue=g??!1,this.listSlotHtmlComponent=y??null,this.disabled=C??!1,this.emptyText=me??"No results found...",this.staticList=!!(U&&!this.appendToBody),this.id=we??"",this.ariaLabel=ke??"",this.isSingleSelect=z??!1,this.showCount=Js??!1,this.disabledBranchNode=Ks??!1,this.direction=Xs??"auto",this.expandSelected=Qs??!1,this.saveScrollPosition=Zs??!0,this.isIndependentNodes=ei??!1,this.iconElements=Vt(ti),this.inputCallback=si,this.openCallback=ii,this.closeCallback=li,this.nameChangeCallback=ni,this.searchCallback=ai,this.ungroupedValue=[],this.groupedValue=[],this.allValue=[],this.isListOpened=!1,this.selectedName="",this.srcElement=null,a(this,te,mt).call(this,s)}mount(){ks({parentHtmlContainer:this.parentHtmlContainer,value:this.value,staticList:this.staticList,appendToBody:this.appendToBody,isSingleSelect:this.isSingleSelect}),this.iconElements=Vt(this.iconElements),a(this,te,mt).call(this,this.value)}updateValue(t){let s=Ai(t),i=n(this,d);i&&(i.updateValue(s),a(this,ce,Ct).call(this,i?.selectedNodes))}destroy(){this.srcElement&&(a(this,oe,xt).call(this),this.srcElement.innerHTML="",this.srcElement=null,a(this,q,le).call(this,!0))}focus(){n(this,u)&&n(this,u).focus()}toggleOpenClose(){n(this,u)&&(n(this,u).openClose(),n(this,u).focus())}scrollWindowHandler(){this.updateListPosition()}focusWindowHandler(t){var s,i,l;(s=this.srcElement)!=null&&s.contains(t.target)||(i=n(this,d))!=null&&i.srcElement.contains(t.target)||((l=n(this,u))==null||l.blur(),a(this,q,le).call(this,!1),a(this,F,re).call(this,!1))}blurWindowHandler(){var t;(t=n(this,u))==null||t.blur(),a(this,q,le).call(this,!1),a(this,F,re).call(this,!1)}updateListPosition(){var t;let s=this.srcElement,i=(t=n(this,d))==null?void 0:t.srcElement;if(!s||!i)return;let{height:l}=i.getBoundingClientRect(),{x:o,y:r,height:p,width:m}=s.getBoundingClientRect(),f=window.innerHeight,k=r,v=f-r-p,b=k>v&&k>=l&&v<l;if(this.direction!=="auto"&&(b=this.direction==="top"),this.appendToBody){(i.style.top!=="0px"||i.style.left!=="0px")&&(i.style.top="0px",i.style.left="0px");let y=o+window.scrollX,C=b?r+window.scrollY-l:r+window.scrollY+p;i.style.transform=`translate(${y}px,${C}px)`,i.style.width=`${m}px`}let g=b?"top":"bottom";i.getAttribute("direction")!==g&&(i.setAttribute("direction",g),a(this,_t,Ys).call(this,b,this.appendToBody))}};d=new WeakMap,u=new WeakMap,D=new WeakMap,ee=new WeakMap,$=new WeakMap,x=new WeakMap,_=new WeakMap,E=new WeakMap,B=new WeakMap,te=new WeakSet,mt=function(e){var t;this.destroy();let{container:s,list:i,input:l}=a(this,wt,vs).call(this);this.srcElement=s,w(this,d,i),w(this,u,l),w(this,x,this.scrollWindowHandler.bind(this)),w(this,_,this.scrollWindowHandler.bind(this)),w(this,E,this.focusWindowHandler.bind(this)),w(this,B,this.blurWindowHandler.bind(this)),this.alwaysOpen&&((t=n(this,u))==null||t.openClose()),this.disabled?this.srcElement.classList.add("treeselect--disabled"):this.srcElement.classList.remove("treeselect--disabled"),this.updateValue(e??this.value)},se=new WeakSet,ge=function({groupedNodes:e,nodes:t,allNodes:s}){this.ungroupedValue=t?Y(t):[],this.groupedValue=e?Y(e):[],this.allValue=s?Y(s):[];let i=[];this.isIndependentNodes||this.isSingleSelect?i=this.allValue:this.isGroupedValue?i=this.groupedValue:i=this.ungroupedValue,this.value=Bi(i,this.isSingleSelect)},wt=new WeakSet,vs=function(){let e=this.parentHtmlContainer;e.classList.add("treeselect");let t=new pt({value:[],options:this.options,openLevel:this.openLevel,listSlotHtmlComponent:this.listSlotHtmlComponent,emptyText:this.emptyText,isSingleSelect:this.isSingleSelect,showCount:this.showCount,disabledBranchNode:this.disabledBranchNode,expandSelected:this.expandSelected,isIndependentNodes:this.isIndependentNodes,iconElements:this.iconElements,inputCallback:i=>a(this,Et,Ss).call(this,i),arrowClickCallback:()=>a(this,St,Ls).call(this),mouseupCallback:()=>{var i;return(i=n(this,u))==null?void 0:i.focus()}}),s=new je({value:[],showTags:this.showTags,tagsCountText:this.tagsCountText,clearable:this.clearable,isAlwaysOpened:this.alwaysOpen,searchable:this.searchable,placeholder:this.placeholder,disabled:this.disabled,isSingleSelect:this.isSingleSelect,id:this.id,ariaLabel:this.ariaLabel,iconElements:this.iconElements,inputCallback:i=>a(this,kt,fs).call(this,i),searchCallback:i=>a(this,ft,gs).call(this,i),openCallback:()=>a(this,yt,xs).call(this),closeCallback:()=>a(this,oe,xt).call(this),keydownCallback:i=>a(this,vt,bs).call(this,i),focusCallback:()=>a(this,bt,Cs).call(this),blurCallback:()=>a(this,gt,Es).call(this),nameChangeCallback:i=>a(this,Lt,ys).call(this,i)});return this.appendToBody&&w(this,D,new ResizeObserver(()=>this.updateListPosition())),e.append(s.srcElement),{container:e,list:t,input:s}},kt=new WeakSet,fs=function(e){var t,s;let i=Y(e);(t=n(this,d))==null||t.updateValue(i);let l=((s=n(this,d))==null?void 0:s.selectedNodes)??{};a(this,se,ge).call(this,l),a(this,ne,Ee).call(this)},vt=new WeakSet,bs=function(e){var t;this.isListOpened&&((t=n(this,d))==null||t.callKeyAction(e))},ft=new WeakSet,gs=function(e){n(this,$)&&clearTimeout(n(this,$)),w(this,$,window.setTimeout(()=>{var t;(t=n(this,d))==null||t.updateSearchValue(e),this.updateListPosition()},350)),a(this,At,Ns).call(this,e)},bt=new WeakSet,Cs=function(){a(this,F,re).call(this,!0),n(this,E)&&n(this,E)&&n(this,B)&&(document.addEventListener("mousedown",n(this,E),!0),document.addEventListener("focus",n(this,E),!0),window.addEventListener("blur",n(this,B)))},gt=new WeakSet,Es=function(){setTimeout(()=>{var e,t;let s=(e=n(this,u))==null?void 0:e.srcElement.contains(document.activeElement),i=(t=n(this,d))==null?void 0:t.srcElement.contains(document.activeElement);!s&&!i&&this.blurWindowHandler()},1)},ce=new WeakSet,Ct=function(e){var t;if(!e)return;let s=[];this.isIndependentNodes||this.isSingleSelect?s=e.allNodes:this.grouped?s=e.groupedNodes:s=e.nodes,(t=n(this,u))==null||t.updateValue(s),a(this,se,ge).call(this,e)},Et=new WeakSet,Ss=function(e){var t,s,i;a(this,ce,Ct).call(this,e),this.isSingleSelect&&!this.alwaysOpen&&((t=n(this,u))==null||t.openClose(),(s=n(this,u))==null||s.clearSearch()),(i=n(this,u))==null||i.focus(),a(this,ne,Ee).call(this)},St=new WeakSet,Ls=function(){var e;(e=n(this,u))==null||e.focus(),this.updateListPosition()},Lt=new WeakSet,ys=function(e){this.selectedName!==e&&(this.selectedName=e,a(this,Tt,Ws).call(this))},yt=new WeakSet,xs=function(){var e;this.isListOpened=!0,n(this,x)&&n(this,_)&&(window.addEventListener("scroll",n(this,x),!0),window.addEventListener("resize",n(this,_))),!(!n(this,d)||!this.srcElement)&&(this.appendToBody?(document.body.appendChild(n(this,d).srcElement),(e=n(this,D))==null||e.observe(this.srcElement)):this.srcElement.appendChild(n(this,d).srcElement),this.updateListPosition(),a(this,ie,Ce).call(this,!0),a(this,Wt,_s).call(this),a(this,Ot,Ts).call(this))},oe=new WeakSet,xt=function(){var e;this.alwaysOpen||(this.isListOpened=!1,n(this,x)&&n(this,_)&&(window.removeEventListener("scroll",n(this,x),!0),window.removeEventListener("resize",n(this,_))),!n(this,d)||!this.srcElement)||!(this.appendToBody?document.body.contains(n(this,d).srcElement):this.srcElement.contains(n(this,d).srcElement))||(w(this,ee,n(this,d).srcElement.scrollTop),this.appendToBody?(document.body.removeChild(n(this,d).srcElement),(e=n(this,D))==null||e.disconnect()):this.srcElement.removeChild(n(this,d).srcElement),a(this,ie,Ce).call(this,!1),a(this,Nt,Os).call(this))},_t=new WeakSet,Ys=function(e,t){if(!n(this,d)||!n(this,u))return;let s=t?"treeselect-list--top-to-body":"treeselect-list--top",i=t?"treeselect-list--bottom-to-body":"treeselect-list--bottom";e?(n(this,d).srcElement.classList.add(s),n(this,d).srcElement.classList.remove(i),n(this,u).srcElement.classList.add("treeselect-input--top"),n(this,u).srcElement.classList.remove("treeselect-input--bottom")):(n(this,d).srcElement.classList.remove(s),n(this,d).srcElement.classList.add(i),n(this,u).srcElement.classList.remove("treeselect-input--top"),n(this,u).srcElement.classList.add("treeselect-input--bottom"))},F=new WeakSet,re=function(e){!n(this,u)||!n(this,d)||(e?(n(this,u).srcElement.classList.add("treeselect-input--focused"),n(this,d).srcElement.classList.add("treeselect-list--focused")):(n(this,u).srcElement.classList.remove("treeselect-input--focused"),n(this,d).srcElement.classList.remove("treeselect-list--focused")))},ie=new WeakSet,Ce=function(e){var t,s,i,l;e?(t=n(this,u))==null||t.srcElement.classList.add("treeselect-input--opened"):(s=n(this,u))==null||s.srcElement.classList.remove("treeselect-input--opened"),this.staticList?(i=n(this,d))==null||i.srcElement.classList.add("treeselect-list--static"):(l=n(this,d))==null||l.srcElement.classList.remove("treeselect-list--static")},q=new WeakSet,le=function(e){!n(this,x)||!n(this,_)||!n(this,E)||!n(this,B)||((!this.alwaysOpen||e)&&(window.removeEventListener("scroll",n(this,x),!0),window.removeEventListener("resize",n(this,_))),document.removeEventListener("mousedown",n(this,E),!0),document.removeEventListener("focus",n(this,E),!0),window.removeEventListener("blur",n(this,B)))},Wt=new WeakSet,_s=function(){var e,t,s;let i=(e=n(this,d))==null?void 0:e.isLastFocusedElementExist();this.saveScrollPosition&&i?(t=n(this,d))==null||t.srcElement.scroll(0,n(this,ee)):(s=n(this,d))==null||s.focusFirstListElement()},ne=new WeakSet,Ee=function(){var e;(e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("input",{detail:this.value})),this.inputCallback&&this.inputCallback(this.value)},Tt=new WeakSet,Ws=function(){var e;(e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("name-change",{detail:this.selectedName})),this.nameChangeCallback&&this.nameChangeCallback(this.selectedName)},Ot=new WeakSet,Ts=function(){var e;this.alwaysOpen||((e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("open",{detail:this.value})),this.openCallback&&this.openCallback(this.value))},Nt=new WeakSet,Os=function(){var e;this.alwaysOpen||((e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("close",{detail:this.value})),this.closeCallback&&this.closeCallback(this.value))},At=new WeakSet,Ns=function(e){var t;let s=e?.trim()??"";(t=this.srcElement)==null||t.dispatchEvent(new CustomEvent("search",{detail:s})),this.searchCallback&&this.searchCallback(s)};function Hi({state:e,name:t,options:s,searchable:i,showCount:l,placeholder:o,disabledBranchNode:r,disabled:p=!1,isSingleSelect:m=!0,showTags:f=!0,clearable:k=!0,isIndependentNodes:v=!0,alwaysOpen:b=!1,emptyText:g}){return{state:e,tree:null,init(){let y=m?this.state!==null?this.state:"":this.state!==null?this.state.split(","):"";this.tree=new de({id:`tree-${t}-id`,ariaLabel:`tree-${t}-label`,parentHtmlContainer:this.$refs.tree,value:y,options:s,searchable:i,showCount:l,placeholder:o,disabledBranchNode:r,disabled:p,isSingleSelect:m,showTags:f,clearable:k,isIndependentNodes:v,alwaysOpen:b,emptyText:g}),this.tree.srcElement.addEventListener("input",C=>{Array.isArray(C.detail)?this.state=C.detail.join(","):this.state=C.detail})}}}export{Hi as default};
>>>>>>> Stashed changes
